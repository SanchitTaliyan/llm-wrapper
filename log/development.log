[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m and [36mDATABASE_URL[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m and [36mDATABASE_URL[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m and [36mDATABASE_URL[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (119.1ms)[0m  [1m[35mCREATE DATABASE "littlebird_bot_development" ENCODING = 'unicode' /*application='LittlebirdBot'*/[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m and [36mDATABASE_URL[0m
[dotenv] Loaded [33m.env[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY) /*application='LittlebirdBot'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='LittlebirdBot'*/[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='LittlebirdBot'*/[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-09-08 02:11:55.521155', '2025-09-08 02:11:55.521157') RETURNING "key" /*application='LittlebirdBot'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Migrating to CreateChats (20250908020914)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "chats" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL) /*application='LittlebirdBot'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250908020914') RETURNING "version" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
Migrating to CreateMessages (20250908020922)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "messages" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "chat_id" integer NOT NULL, "content" text, "role" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_0f670de7ba"
FOREIGN KEY ("chat_id")
  REFERENCES "chats" ("id")
) /*application='LittlebirdBot'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_messages_on_chat_id" ON "messages" ("chat_id") /*application='LittlebirdBot'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250908020922') RETURNING "version" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
Started GET "/" for 127.0.0.1 at 2025-09-08 07:52:06 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  Rendered chats/index.html.erb within layouts/application (Duration: 6.2ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | GC: 0.7ms)
Completed 200 OK in 78ms (Views: 13.0ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 9.6ms)


Started GET "/assets/application-bfcdf840.js" for 127.0.0.1 at 2025-09-08 07:52:06 +0530
Started GET "/assets/application-8b441ae0.css" for 127.0.0.1 at 2025-09-08 07:52:06 +0530
Started GET "/assets/turbo.min-3a2e143f.js" for 127.0.0.1 at 2025-09-08 07:52:06 +0530
Started GET "/assets/stimulus.min-4b1e420e.js" for 127.0.0.1 at 2025-09-08 07:52:06 +0530
Started GET "/assets/stimulus-loading-1fc53fe7.js" for 127.0.0.1 at 2025-09-08 07:52:06 +0530
Started GET "/assets/controllers/application-3affb389.js" for 127.0.0.1 at 2025-09-08 07:52:06 +0530
Started GET "/assets/controllers/hello_controller-708796bd.js" for 127.0.0.1 at 2025-09-08 07:52:06 +0530
Started GET "/assets/controllers/index-ee64e1f1.js" for 127.0.0.1 at 2025-09-08 07:52:06 +0530
Started POST "/chats" for 127.0.0.1 at 2025-09-08 07:52:15 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"New Chat"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('New Chat', '2025-09-08 02:22:15.163632', '2025-09-08 02:22:15.163632') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 42ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 6.1ms)


Started GET "/chats/1" for 127.0.0.1 at 2025-09-08 07:52:15 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 1 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 1 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 1 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 10.2ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | GC: 0.5ms)
Completed 200 OK in 30ms (Views: 10.6ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.5ms)


Started POST "/chats/1/messages" for 127.0.0.1 at 2025-09-08 07:52:20 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"1"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 1 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (1, 'Hi', 'user', '2025-09-08 02:22:20.936932', '2025-09-08 02:22:20.936932') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 1 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: unknown keywords: :model, :messages, :temperature, :max_tokens
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (1, 'I''m sorry, I''m having trouble processing your request right now. Please try again later.', 'assistant', '2025-09-08 02:22:20.940350', '2025-09-08 02:22:20.940350') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 1 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:57:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:59:in `update_chat_title'
  [1m[36mChat Update (0.4ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Hi', "updated_at" = '2025-09-08 02:22:20.942639' WHERE "chats"."id" = 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:59:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:59:in `update_chat_title'
Completed 201 Created in 41ms (Views: 0.1ms | ActiveRecord: 1.9ms (7 queries, 0 cached) | GC: 0.6ms)


[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 1 /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Destroy (0.0ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = 1 /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Destroy (0.0ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = 2 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 1 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mChat Create (2.5ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Introduction to Rails', '2025-09-08 02:24:36.791138', '2025-09-08 02:24:36.791138') RETURNING "id" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (2, 'Hi! Can you help me understand Ruby on Rails?', 'user', '2025-09-08 02:24:36.797737', '2025-09-08 02:24:36.797737') RETURNING "id" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (2, 'Of course! Ruby on Rails is a web application framework written in Ruby. It follows the Model-View-Controller (MVC) pattern and emphasizes convention over configuration.', 'assistant', '2025-09-08 02:24:36.799228', '2025-09-08 02:24:36.799228') RETURNING "id" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mChat Create (0.3ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Database Design', '2025-09-08 02:24:36.800616', '2025-09-08 02:24:36.800616') RETURNING "id" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (3, 'What are some best practices for database design?', 'user', '2025-09-08 02:24:36.801743', '2025-09-08 02:24:36.801743') RETURNING "id" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (3, 'Here are some key database design principles:

1. Normalize your data to reduce redundancy
2. Use appropriate data types
3. Create proper indexes
4. Establish clear relationships between tables', 'assistant', '2025-09-08 02:24:36.802924', '2025-09-08 02:24:36.802924') RETURNING "id" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*application='LittlebirdBot'*/[0m
Started GET "/chats" for 127.0.0.1 at 2025-09-08 08:22:54 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.8ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 11.2ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 12.0ms | GC: 0.7ms)
Completed 200 OK in 32ms (Views: 11.5ms | ActiveRecord: 1.1ms (10 queries, 4 cached) | GC: 0.8ms)


[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
Started GET "/" for 127.0.0.1 at 2025-09-08 10:03:33 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 16.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 30.4ms | GC: 8.6ms)
Completed 200 OK in 70ms (Views: 30.6ms | ActiveRecord: 1.6ms (10 queries, 4 cached) | GC: 8.6ms)


Started GET "/chats/3" for 127.0.0.1 at 2025-09-08 10:16:48 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mChat Load (0.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 3 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 3 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 3.4ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 4.0ms | GC: 0.5ms)
Completed 200 OK in 33ms (Views: 4.1ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.5ms)


Started GET "/chats/2" for 127.0.0.1 at 2025-09-08 10:16:50 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 2 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 2 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.2ms)
Completed 200 OK in 33ms (Views: 2.5ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.7ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:18:05 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/assets/stimulus.min-2395e199.js.map" for 127.0.0.1 at 2025-09-08 10:18:05 +0530
Started GET "/assets/turbo.min-5f3b7fda.js.map" for 127.0.0.1 at 2025-09-08 10:18:05 +0530
Started GET "/" for 127.0.0.1 at 2025-09-08 10:18:29 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 19.2ms | GC: 12.4ms)
  Rendered layout layouts/application.html.erb (Duration: 20.6ms | GC: 13.4ms)
Completed 200 OK in 52ms (Views: 19.7ms | ActiveRecord: 1.1ms (10 queries, 4 cached) | GC: 14.5ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:18:29 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:21:31 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Chat 9/8/2025, 10:21:31 AM"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (1.2ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Chat 9/8/2025, 10:21:31 AM', '2025-09-08 04:51:31.451562', '2025-09-08 04:51:31.451562') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 33ms (Views: 0.2ms | ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.2ms)


Started GET "/chats/4" for 127.0.0.1 at 2025-09-08 10:21:31 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 4 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 4 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 2.1ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:21:31 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:21:47 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 7.0ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | GC: 0.4ms)
Completed 200 OK in 41ms (Views: 7.1ms | ActiveRecord: 0.4ms (12 queries, 4 cached) | GC: 0.4ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:26:32 +0530
Processing by ChatsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>""}, "commit"=>"New Chat"}
Completed 422 Unprocessable Content in 25ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats/4" for 127.0.0.1 at 2025-09-08 10:26:37 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 4 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 4 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 31ms (Views: 1.8ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:26:38 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 8.8ms | GC: 2.4ms)
  Rendered layout layouts/application.html.erb (Duration: 9.1ms | GC: 2.4ms)
Completed 200 OK in 43ms (Views: 8.9ms | ActiveRecord: 0.4ms (12 queries, 4 cached) | GC: 2.4ms)


Started GET "/chats/4" for 127.0.0.1 at 2025-09-08 10:26:40 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 4 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 4 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.5ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.4ms)
Completed 200 OK in 28ms (Views: 2.0ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.4ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:38:04 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 8.3ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 8.7ms | GC: 0.7ms)
Completed 200 OK in 37ms (Views: 7.5ms | ActiveRecord: 1.4ms (12 queries, 4 cached) | GC: 0.7ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:38:15 +0530
Processing by ChatsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Test Chat"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Test Chat', '2025-09-08 05:08:15.905195', '2025-09-08 05:08:15.905195') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 32ms (Views: 0.1ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:38:34 +0530
Processing by ChatsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Test Chat"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.9ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Test Chat', '2025-09-08 05:08:34.204280', '2025-09-08 05:08:34.204280') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 32ms (Views: 0.1ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:38:35 +0530
Processing by ChatsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Test Chat"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Test Chat', '2025-09-08 05:08:35.916290', '2025-09-08 05:08:35.916290') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 31ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:38:46 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 10.8ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 11.2ms | GC: 0.9ms)
Completed 200 OK in 39ms (Views: 10.7ms | ActiveRecord: 0.6ms (18 queries, 4 cached) | GC: 0.9ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:38:46 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats/5" for 127.0.0.1 at 2025-09-08 10:38:55 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"5"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 5 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 5 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.0ms)
Completed 200 OK in 31ms (Views: 1.8ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.1ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:38:57 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 9.6ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | GC: 0.7ms)
Completed 200 OK in 39ms (Views: 9.7ms | ActiveRecord: 0.5ms (18 queries, 4 cached) | GC: 0.7ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:39:08 +0530
Processing by ChatsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Hello Chat"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.9ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat', '2025-09-08 05:09:08.070925', '2025-09-08 05:09:08.070925') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 34ms (Views: 0.1ms | ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 2.0ms)


[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:41:18 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Processing by ChatsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Hello Chat 01"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.4ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat 01', '2025-09-08 05:11:18.878858', '2025-09-08 05:11:18.878858') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 39ms (Views: 0.1ms | ActiveRecord: 1.3ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:45:09 +0530
Processing by ChatsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Hello Chat 02"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.4ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat 02', '2025-09-08 05:15:09.729989', '2025-09-08 05:15:09.729989') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 22ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)


[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:45:31 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Processing by ChatsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Hello Chat 03"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.4ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat 03', '2025-09-08 05:15:31.689052', '2025-09-08 05:15:31.689052') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 38ms (Views: 0.1ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/4" for 127.0.0.1 at 2025-09-08 10:46:21 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 4 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 4 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 5.6ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | GC: 0.8ms)
Completed 200 OK in 39ms (Views: 11.9ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 1.2ms)


[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:47:50 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (11, 10, 9, 8, 7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 11 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 11 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 10 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 10 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 9 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 9 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 8 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 8 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 47.4ms | GC: 26.1ms)
  Rendered layout layouts/application.html.erb (Duration: 50.8ms | GC: 26.6ms)
Completed 200 OK in 89ms (Views: 50.8ms | ActiveRecord: 1.8ms (26 queries, 4 cached) | GC: 26.6ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:47:51 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:48:01 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Hello Chat 04"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (1.9ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat 04', '2025-09-08 05:18:01.768301', '2025-09-08 05:18:01.768301') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 34ms (Views: 0.1ms | ActiveRecord: 2.4ms (1 query, 0 cached) | GC: 2.5ms)


Started GET "/chats/12" for 127.0.0.1 at 2025-09-08 10:48:01 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"12"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 12 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 12 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 12 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 6.2ms | GC: 4.5ms)
  Rendered layout layouts/application.html.erb (Duration: 7.6ms | GC: 5.5ms)
Completed 200 OK in 30ms (Views: 8.0ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 9.4ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:48:01 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:48:51 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 12 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 12 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 11 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 11 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 10 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 10 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 9 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 9 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 8 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 8 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 14.5ms | GC: 2.3ms)
  Rendered layout layouts/application.html.erb (Duration: 14.8ms | GC: 2.3ms)
Completed 200 OK in 42ms (Views: 14.3ms | ActiveRecord: 0.7ms (28 queries, 4 cached) | GC: 2.3ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:48:57 +0530
Processing by ChatsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Hello chat 05"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello chat 05', '2025-09-08 05:18:57.673254', '2025-09-08 05:18:57.673254') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 27ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:48:57 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2025-09-08 10:48:57 +0530
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:49:14 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 13 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 13 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 12 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 12 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 11 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 11 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 10 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 10 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 9 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 9 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 8 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 8 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 11.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | GC: 0.0ms)
Completed 200 OK in 29ms (Views: 10.9ms | ActiveRecord: 0.6ms (30 queries, 4 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:49:14 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:49:23 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Hello chat 06"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (1.1ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello chat 06', '2025-09-08 05:19:23.341601', '2025-09-08 05:19:23.341601') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 32ms (Views: 0.1ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.4ms)


Started GET "/chats/14" for 127.0.0.1 at 2025-09-08 10:49:23 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"14"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 14 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 14 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 14 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.2ms)
Completed 200 OK in 21ms (Views: 1.8ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.2ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:49:23 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:49:28 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 14 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 14 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 13 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 13 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 12 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 12 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 11 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 11 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 10 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 10 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 9 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 9 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 8 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 8 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 13.1ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | GC: 0.4ms)
Completed 200 OK in 39ms (Views: 12.9ms | ActiveRecord: 0.7ms (32 queries, 4 cached) | GC: 0.5ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:49:37 +0530
Processing by ChatsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Hello Chat 07"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat 07', '2025-09-08 05:19:37.857223', '2025-09-08 05:19:37.857223') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 38ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:49:37 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:49:53 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 15 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 15 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 14 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 14 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 13 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 13 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 12 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 12 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 11 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 11 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 10 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 10 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 9 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 9 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 8 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 8 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 19.7ms | GC: 3.3ms)
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | GC: 3.3ms)
Completed 200 OK in 52ms (Views: 19.3ms | ActiveRecord: 1.0ms (34 queries, 4 cached) | GC: 3.3ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:49:53 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:50:21 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Hello Chat 08"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat 08', '2025-09-08 05:20:21.620860', '2025-09-08 05:20:21.620860') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 30ms (Views: 0.1ms | ActiveRecord: 1.5ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/16" for 127.0.0.1 at 2025-09-08 10:50:21 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"16"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 16 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 16 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 16 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 21ms (Views: 2.5ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:50:21 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:51:37 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:51:37 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:51:42 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Hello Chat 09"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat 09', '2025-09-08 05:21:42.107509', '2025-09-08 05:21:42.107509') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 27ms (Views: 0.1ms | ActiveRecord: 1.4ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/17" for 127.0.0.1 at 2025-09-08 10:51:42 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"17"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 17 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 17 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 17 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 3.6ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 1.1ms)
Completed 200 OK in 25ms (Views: 5.8ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 1.1ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:51:42 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:51:45 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 17 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 17 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 16 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 16 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 15 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 15 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 14 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 14 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 13 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 13 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 12 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 12 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 11 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 11 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 10 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 10 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 9 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 9 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 8 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 8 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 23.3ms | GC: 3.0ms)
  Rendered layout layouts/application.html.erb (Duration: 23.7ms | GC: 3.0ms)
Completed 200 OK in 55ms (Views: 22.8ms | ActiveRecord: 1.1ms (38 queries, 4 cached) | GC: 3.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:51:56 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:51:56 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:52:02 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Hello Chat 10"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat 10', '2025-09-08 05:22:02.922235', '2025-09-08 05:22:02.922235') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 34ms (Views: 0.1ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.9ms)


Started GET "/chats/18" for 127.0.0.1 at 2025-09-08 10:52:02 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"18"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 18 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 18 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 18 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.3ms)
Completed 200 OK in 22ms (Views: 2.5ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.3ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:52:02 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:52:07 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 18 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 18 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 17 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 17 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 16 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 16 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 15 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 15 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 14 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 14 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 13 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 13 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 12 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 12 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 11 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 11 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 10 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 10 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 9 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 9 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 8 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 8 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 17.3ms | GC: 2.3ms)
  Rendered layout layouts/application.html.erb (Duration: 17.6ms | GC: 2.3ms)
Completed 200 OK in 37ms (Views: 16.3ms | ActiveRecord: 1.5ms (40 queries, 4 cached) | GC: 2.3ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:52:14 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 18 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 18 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 17 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 17 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 16 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 16 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 15 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 15 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 14 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 14 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 13 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 13 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 12 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 12 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 11 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 11 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 10 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 10 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 9 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 9 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 8 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 8 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 18.7ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 19.1ms | GC: 1.0ms)
Completed 200 OK in 49ms (Views: 18.3ms | ActiveRecord: 1.0ms (40 queries, 4 cached) | GC: 1.0ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 10:52:30 +0530
Processing by ChatsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Hello Chat 11"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat 11', '2025-09-08 05:22:30.416039', '2025-09-08 05:22:30.416039') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 25ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:52:30 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 10:52:51 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 19 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 19 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 18 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 18 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 17 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 17 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 16 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 16 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 15 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 15 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 14 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 14 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 13 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 13 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 12 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 12 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 11 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 11 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 10 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 10 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 9 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 9 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 8 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 8 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 7 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 6 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 5 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 4 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 20.7ms | GC: 1.4ms)
  Rendered layout layouts/application.html.erb (Duration: 21.1ms | GC: 1.4ms)
Completed 200 OK in 52ms (Views: 20.2ms | ActiveRecord: 1.1ms (42 queries, 4 cached) | GC: 1.5ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 10:52:51 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."id" DESC LIMIT 1 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" /* loading for pp */ LIMIT 11 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."id" DESC LIMIT 2 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."id" ASC LIMIT 2 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" NOT IN (2, 3) /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 4 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.1ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 4 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 5 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 5 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 6 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 6 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 7 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 7 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 8 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 8 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 9 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 9 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 10 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 10 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 11 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 11 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 12 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 12 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 13 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 13 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 14 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 14 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 15 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 15 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 16 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 16 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 17 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 17 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 18 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 18 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 19 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 19 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" /* loading for pp */ LIMIT 11 /*application='LittlebirdBot'*/[0m
Started POST "/chats" for 127.0.0.1 at 2025-09-08 11:31:11 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Hello Chat 11"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (2.0ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello Chat 11', '2025-09-08 06:01:11.681455', '2025-09-08 06:01:11.681455') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 28ms (Views: 0.1ms | ActiveRecord: 2.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/20" for 127.0.0.1 at 2025-09-08 11:31:11 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"20"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 20 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 20 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 1.6ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:31:11 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:31:12 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.5ms | GC: 0.0ms)
Completed 200 OK in 29ms (Views: 6.3ms | ActiveRecord: 0.4ms (12 queries, 4 cached) | GC: 0.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:31:13 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 9.8ms | GC: 2.5ms)
  Rendered layout layouts/application.html.erb (Duration: 10.2ms | GC: 2.5ms)
Completed 200 OK in 46ms (Views: 9.9ms | ActiveRecord: 0.5ms (12 queries, 4 cached) | GC: 2.5ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:32:22 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 7.0ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 7.3ms | GC: 0.7ms)
Completed 200 OK in 35ms (Views: 7.2ms | ActiveRecord: 0.4ms (12 queries, 4 cached) | GC: 0.7ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:34:09 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 8.0ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 8.4ms | GC: 0.9ms)
Completed 200 OK in 40ms (Views: 8.2ms | ActiveRecord: 0.4ms (12 queries, 4 cached) | GC: 1.2ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:35:23 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 6.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | GC: 0.0ms)
Completed 200 OK in 35ms (Views: 6.4ms | ActiveRecord: 0.4ms (12 queries, 4 cached) | GC: 0.0ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 11:35:29 +0530
Processing by ChatsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Hello1"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello1', '2025-09-08 06:05:29.719896', '2025-09-08 06:05:29.719896') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 30ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:35:29 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:37:31 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (21, 20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 21 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 21 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 9.3ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | GC: 0.7ms)
Completed 200 OK in 33ms (Views: 10.5ms | ActiveRecord: 1.1ms (14 queries, 4 cached) | GC: 1.5ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:37:31 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats/21" for 127.0.0.1 at 2025-09-08 11:37:34 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"21"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 21 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 21 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 21 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.0ms)
Completed 200 OK in 43ms (Views: 2.0ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.1ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:37:35 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (21, 20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 21 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 21 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 8.1ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 8.5ms | GC: 0.4ms)
Completed 200 OK in 38ms (Views: 8.4ms | ActiveRecord: 0.5ms (14 queries, 4 cached) | GC: 0.6ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 11:37:42 +0530
Processing by ChatsController#create as HTML
  Parameters: {"authenticity_token"=>"[FILTERED]", "chat"=>{"title"=>"Hello 2"}, "commit"=>"New Chat"}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello 2', '2025-09-08 06:07:43.027271', '2025-09-08 06:07:43.027271') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 32ms (Views: 0.1ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:37:43 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:40:43 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (22, 21, 20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 22 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 22 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 21 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 21 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 11.4ms | GC: 1.9ms)
  Rendered layout layouts/application.html.erb (Duration: 12.6ms | GC: 2.2ms)
Completed 200 OK in 33ms (Views: 12.6ms | ActiveRecord: 1.0ms (16 queries, 4 cached) | GC: 2.4ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:40:44 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats/22" for 127.0.0.1 at 2025-09-08 11:40:45 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"22"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 22 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 22 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 22 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.6ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | GC: 0.9ms)
Completed 200 OK in 35ms (Views: 3.1ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.9ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:41:02 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (22, 21, 20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 22 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 22 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 21 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 21 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 10.1ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 11.0ms | GC: 0.6ms)
Completed 200 OK in 33ms (Views: 11.0ms | ActiveRecord: 1.0ms (16 queries, 4 cached) | GC: 0.6ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:41:02 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 11:41:08 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Hello 3"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello 3', '2025-09-08 06:11:08.345217', '2025-09-08 06:11:08.345217') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 33ms (Views: 0.1ms | ActiveRecord: 1.1ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/23" for 127.0.0.1 at 2025-09-08 11:41:08 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"23"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 23 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 23 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 23 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 1.8ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:41:08 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:41:12 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (23, 22, 21, 20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 23 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 23 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 22 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 22 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 21 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 21 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 9.6ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 10.2ms | GC: 0.9ms)
Completed 200 OK in 39ms (Views: 9.8ms | ActiveRecord: 0.6ms (18 queries, 4 cached) | GC: 0.9ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:41:12 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 11:41:16 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Hello 4"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello 4', '2025-09-08 06:11:16.263217', '2025-09-08 06:11:16.263217') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 33ms (Views: 0.1ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/24" for 127.0.0.1 at 2025-09-08 11:41:16 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"24"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 24 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 24 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 24 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.1ms)
Completed 200 OK in 22ms (Views: 1.6ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.1ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:41:16 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats/24/messages" for 127.0.0.1 at 2025-09-08 11:41:18 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"24"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 24 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (24, 'Hi', 'user', '2025-09-08 06:11:18.832646', '2025-09-08 06:11:18.832646') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 24 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: unknown keywords: :model, :messages, :temperature, :max_tokens
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (24, 'I''m sorry, I''m having trouble processing your request right now. Please try again later.', 'assistant', '2025-09-08 06:11:18.835807', '2025-09-08 06:11:18.835807') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 24 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 24 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:57:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:59:in `update_chat_title'
  [1m[36mChat Update (0.4ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Hi', "updated_at" = '2025-09-08 06:11:18.838063' WHERE "chats"."id" = 24 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:59:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:59:in `update_chat_title'
Completed 201 Created in 32ms (Views: 0.1ms | ActiveRecord: 1.6ms (7 queries, 0 cached) | GC: 0.4ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:42:43 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (24, 23, 22, 21, 20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 24 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 24 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 24 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 24 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 23 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 23 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 22 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 22 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 21 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 21 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 14.9ms | GC: 2.7ms)
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | GC: 2.7ms)
Completed 200 OK in 35ms (Views: 15.7ms | ActiveRecord: 1.4ms (22 queries, 6 cached) | GC: 2.9ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:42:43 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 11:42:59 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Hello 4"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Hello 4', '2025-09-08 06:12:59.919899', '2025-09-08 06:12:59.919899') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 31ms (Views: 0.1ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/25" for 127.0.0.1 at 2025-09-08 11:42:59 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"25"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 25 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 25 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 25 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 1.9ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.1ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:42:59 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:44:26 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (25, 24, 23, 22, 21, 20, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 25 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 25 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 24 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 24 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 24 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 24 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 23 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 23 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 22 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 22 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 21 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 21 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 20 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 14.4ms | GC: 2.6ms)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | GC: 2.7ms)
Completed 200 OK in 36ms (Views: 15.5ms | ActiveRecord: 1.1ms (24 queries, 6 cached) | GC: 2.7ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:44:26 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
  [1m[36mChat Load (1.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" /* loading for pp */ LIMIT 11 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" NOT IN (2, 3) /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 20 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.1ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 20 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 21 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 21 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 22 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 22 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 23 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 23 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 24 /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Destroy (0.1ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = 7 /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Destroy (0.0ms)[0m  [1m[31mDELETE FROM "messages" WHERE "messages"."id" = 8 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 24 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 25 /*application='LittlebirdBot'*/[0m
  [1m[36mChat Destroy (0.0ms)[0m  [1m[31mDELETE FROM "chats" WHERE "chats"."id" = 25 /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" /* loading for pp */ LIMIT 11 /*application='LittlebirdBot'*/[0m
Started GET "/chats" for 127.0.0.1 at 2025-09-08 11:45:54 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 7.0ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | GC: 0.4ms)
Completed 200 OK in 39ms (Views: 7.1ms | ActiveRecord: 0.5ms (10 queries, 4 cached) | GC: 0.4ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:45:54 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 11:52:18 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"testChat"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (1.4ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('testChat', '2025-09-08 06:22:18.743775', '2025-09-08 06:22:18.743775') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 34ms (Views: 0.1ms | ActiveRecord: 1.7ms (1 query, 0 cached) | GC: 0.1ms)


Started GET "/chats/26" for 127.0.0.1 at 2025-09-08 11:52:18 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.8ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.5ms)
Completed 200 OK in 23ms (Views: 2.3ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.5ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 11:52:18 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 11:52:23 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 06:22:23.816057', '2025-09-08 06:22:23.816057') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: unknown keywords: :model, :messages, :temperature, :max_tokens
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'I''m sorry, I''m having trouble processing your request right now. Please try again later.', 'assistant', '2025-09-08 06:22:23.818604', '2025-09-08 06:22:23.818604') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:57:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:59:in `update_chat_title'
  [1m[36mChat Update (0.4ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Hi', "updated_at" = '2025-09-08 06:22:23.820915' WHERE "chats"."id" = 26 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:59:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:59:in `update_chat_title'
Completed 201 Created in 32ms (Views: 0.1ms | ActiveRecord: 1.7ms (7 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats/26" for 127.0.0.1 at 2025-09-08 12:31:14 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"26"}
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 2.5ms | ActiveRecord: 1.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 12:31:14 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 12:34:28 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hello"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hello', 'user', '2025-09-08 07:04:28.765006', '2025-09-08 07:04:28.765006') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: unknown keywords: :model, :messages, :temperature, :max_tokens
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'I''m sorry, I''m having trouble processing your request right now. Please try again later.', 'assistant', '2025-09-08 07:04:28.768476', '2025-09-08 07:04:28.768476') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 35ms (Views: 0.1ms | ActiveRecord: 1.9ms (5 queries, 0 cached) | GC: 0.2ms)


Started GET "/chats/26" for 127.0.0.1 at 2025-09-08 12:53:04 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"26"}
  [1m[36mChat Load (1.6ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 3.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.1ms | GC: 0.0ms)
Completed 200 OK in 38ms (Views: 5.2ms | ActiveRecord: 1.9ms (3 queries, 0 cached) | GC: 0.3ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 12:53:04 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 12:53:47 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:23:47.123703', '2025-09-08 07:23:47.123703') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: unknown keywords: :model, :messages, :temperature, :max_tokens
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'I''m sorry, I''m having trouble processing your request right now. Please try again later.', 'assistant', '2025-09-08 07:23:47.126371', '2025-09-08 07:23:47.126371') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 37ms (Views: 0.1ms | ActiveRecord: 2.8ms (5 queries, 0 cached) | GC: 0.9ms)


Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 12:53:49 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:23:49.869720', '2025-09-08 07:23:49.869720') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: unknown keywords: :model, :messages, :temperature, :max_tokens
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'I''m sorry, I''m having trouble processing your request right now. Please try again later.', 'assistant', '2025-09-08 07:23:49.871832', '2025-09-08 07:23:49.871832') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 36ms (Views: 0.1ms | ActiveRecord: 1.2ms (5 queries, 0 cached) | GC: 0.0ms)


  [1m[36mMessage Load (1.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" ORDER BY "messages"."id" DESC LIMIT 1 /*application='LittlebirdBot'*/[0m
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" ORDER BY "messages"."id" DESC LIMIT 2 /*application='LittlebirdBot'*/[0m
Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 13:10:30 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:40:30.858677', '2025-09-08 07:40:30.858677') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
Completed 201 Created in 20251ms (Views: 0.1ms | ActiveRecord: 1.6ms (3 queries, 0 cached) | GC: 24.3ms)


Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 13:11:38 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:41:38.846530', '2025-09-08 07:41:38.846530') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
Completed 201 Created in 1214ms (Views: 0.3ms | ActiveRecord: 1.3ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 13:12:39 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:42:39.804299', '2025-09-08 07:42:39.804299') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 /* loading for inspect */ ORDER BY "messages"."created_at" ASC LIMIT 11 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:51:in `generate_ai_response'
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
Completed 201 Created in 49332ms (Views: 0.4ms | ActiveRecord: 2.1ms (4 queries, 0 cached) | GC: 26.7ms)


Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 13:14:10 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:44:10.207214', '2025-09-08 07:44:10.207214') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.5ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
Completed 201 Created in 13830ms (Views: 0.3ms | ActiveRecord: 2.0ms (3 queries, 0 cached) | GC: 0.6ms)


[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m and [36mOPENAI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 13:17:06 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:47:06.794183', '2025-09-08 07:47:06.794183') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
Completed 201 Created in 23967ms (Views: 0.5ms | ActiveRecord: 1.6ms (3 queries, 0 cached) | GC: 0.3ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:17:49 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 17.8ms | GC: 8.3ms)
  Rendered layout layouts/application.html.erb (Duration: 24.3ms | GC: 9.6ms)
Completed 200 OK in 53ms (Views: 25.4ms | ActiveRecord: 0.5ms (14 queries, 6 cached) | GC: 9.6ms)


Started GET "/chats/26" for 127.0.0.1 at 2025-09-08 13:17:56 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 3.9ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | GC: 0.7ms)
Completed 200 OK in 33ms (Views: 4.6ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.7ms)


Started GET "/chats/26?content=Hi" for 127.0.0.1 at 2025-09-08 13:18:30 +0530
Processing by ChatsController#show as HTML
  Parameters: {"content"=>"Hi", "id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 11.6ms | GC: 7.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.8ms | GC: 7.1ms)
Completed 200 OK in 34ms (Views: 13.1ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 7.1ms)


Started GET "/chats/26?content=Hi" for 127.0.0.1 at 2025-09-08 13:19:25 +0530
Processing by ChatsController#show as HTML
  Parameters: {"content"=>"Hi", "id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 4.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 5.8ms | ActiveRecord: 0.8ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats/26?content=Hi" for 127.0.0.1 at 2025-09-08 13:19:37 +0530
Processing by ChatsController#show as HTML
  Parameters: {"content"=>"Hi", "id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 4.7ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 5.8ms | GC: 0.4ms)
Completed 200 OK in 29ms (Views: 6.2ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.6ms)


[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m and [36mOPENAI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
Started GET "/" for 127.0.0.1 at 2025-09-08 13:20:15 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 21.9ms | GC: 8.9ms)
  Rendered layout layouts/application.html.erb (Duration: 41.5ms | GC: 24.1ms)
Completed 200 OK in 81ms (Views: 42.1ms | ActiveRecord: 1.1ms (14 queries, 6 cached) | GC: 24.1ms)


Started GET "/chats/26" for 127.0.0.1 at 2025-09-08 13:20:17 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 3.3ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 3.8ms | GC: 0.2ms)
Completed 200 OK in 36ms (Views: 3.9ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.7ms)


Started GET "/chats/26?content=Hi" for 127.0.0.1 at 2025-09-08 13:20:27 +0530
Processing by ChatsController#show as HTML
  Parameters: {"content"=>"Hi", "id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.2ms | GC: 0.0ms)
Completed 200 OK in 32ms (Views: 3.2ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.5ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:21:00 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats/26?content=Hi" for 127.0.0.1 at 2025-09-08 13:21:06 +0530
Processing by ChatsController#show as HTML
  Parameters: {"content"=>"Hi", "id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 3.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.0ms)
Completed 200 OK in 35ms (Views: 4.7ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats/26?content=Hi" for 127.0.0.1 at 2025-09-08 13:22:25 +0530
Processing by ChatsController#show as HTML
  Parameters: {"content"=>"Hi", "id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 4.7ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 5.7ms | GC: 0.5ms)
Completed 200 OK in 26ms (Views: 6.1ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 1.2ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:22:44 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 10.9ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 11.3ms | GC: 1.2ms)
Completed 200 OK in 43ms (Views: 11.0ms | ActiveRecord: 0.6ms (14 queries, 6 cached) | GC: 1.2ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:22:44 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats/26" for 127.0.0.1 at 2025-09-08 13:22:46 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 3.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 3.6ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats/26?content=Hi" for 127.0.0.1 at 2025-09-08 13:22:52 +0530
Processing by ChatsController#show as HTML
  Parameters: {"content"=>"Hi", "id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.3ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 3.4ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats/26?content=Hi" for 127.0.0.1 at 2025-09-08 13:22:57 +0530
Processing by ChatsController#show as HTML
  Parameters: {"content"=>"Hi", "id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 4.2ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 4.8ms | GC: 1.3ms)
Completed 200 OK in 34ms (Views: 4.9ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 1.3ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:22:58 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 8.4ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 8.8ms | GC: 0.3ms)
Completed 200 OK in 40ms (Views: 8.1ms | ActiveRecord: 0.8ms (14 queries, 6 cached) | GC: 0.9ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:22:58 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:23:00 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 7.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 8.3ms | GC: 0.0ms)
Completed 200 OK in 40ms (Views: 8.0ms | ActiveRecord: 0.5ms (14 queries, 6 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:23:00 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats/26" for 127.0.0.1 at 2025-09-08 13:24:41 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 4.3ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 5.3ms | GC: 0.4ms)
Completed 200 OK in 27ms (Views: 5.7ms | ActiveRecord: 0.7ms (3 queries, 0 cached) | GC: 0.6ms)


Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 13:24:47 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:54:47.915009', '2025-09-08 07:54:47.915009') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
Completed 201 Created in 1056ms (Views: 0.5ms | ActiveRecord: 1.1ms (3 queries, 0 cached) | GC: 0.2ms)


Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 13:25:36 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:39:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:55:36.332830', '2025-09-08 07:55:36.332830') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
Completed 201 Created in 12684ms (Views: 0.2ms | ActiveRecord: 1.3ms (3 queries, 0 cached) | GC: 2.2ms)


Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 13:26:26 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:38:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:56:27.040695', '2025-09-08 07:56:27.040695') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
Completed 201 Created in 111330ms (Views: 0.3ms | ActiveRecord: 1.3ms (3 queries, 0 cached) | GC: 4.0ms)


Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 13:28:21 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hi', 'user', '2025-09-08 07:58:21.957123', '2025-09-08 07:58:21.957123') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: insufficient_quota - You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.9ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'I''m sorry, but I''ve reached my usage limit. Please try again later or contact support.', 'assistant', '2025-09-08 07:58:22.759703', '2025-09-08 07:58:22.759703') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 840ms (Views: 0.3ms | ActiveRecord: 4.4ms (5 queries, 0 cached) | GC: 6.3ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:28:37 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 14.8ms | GC: 4.3ms)
  Rendered layout layouts/application.html.erb (Duration: 16.3ms | GC: 4.6ms)
Completed 200 OK in 39ms (Views: 16.4ms | ActiveRecord: 1.2ms (14 queries, 6 cached) | GC: 4.6ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:28:37 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:28:38 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.7ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 9.5ms | GC: 1.1ms)
  Rendered layout layouts/application.html.erb (Duration: 9.9ms | GC: 1.1ms)
Completed 200 OK in 41ms (Views: 9.1ms | ActiveRecord: 1.1ms (14 queries, 6 cached) | GC: 1.1ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:28:38 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:28:39 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 7.4ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 7.7ms | GC: 1.3ms)
Completed 200 OK in 23ms (Views: 7.5ms | ActiveRecord: 0.3ms (14 queries, 6 cached) | GC: 1.3ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:28:39 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats/3" for 127.0.0.1 at 2025-09-08 13:28:40 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 3 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 3 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.0ms)
Completed 200 OK in 28ms (Views: 3.0ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats/26" for 127.0.0.1 at 2025-09-08 13:28:41 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 26 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 3.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | GC: 0.0ms)
Completed 200 OK in 32ms (Views: 3.7ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/chats/26/messages" for 127.0.0.1 at 2025-09-08 13:28:46 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hello bro"}, "chat_id"=>"26"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 26 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'Hello bro', 'user', '2025-09-08 07:58:46.208835', '2025-09-08 07:58:46.208835') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: insufficient_quota - You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (26, 'I''m sorry, but I''ve reached my usage limit. Please try again later or contact support.', 'assistant', '2025-09-08 07:58:47.131177', '2025-09-08 07:58:47.131177') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 959ms (Views: 0.2ms | ActiveRecord: 2.8ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:28:49 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 10.4ms | GC: 3.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | GC: 3.0ms)
Completed 200 OK in 33ms (Views: 10.5ms | ActiveRecord: 0.4ms (14 queries, 6 cached) | GC: 3.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:28:50 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 13:28:55 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Chat1"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Chat1', '2025-09-08 07:58:55.041221', '2025-09-08 07:58:55.041221') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 26ms (Views: 0.1ms | ActiveRecord: 0.6ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/27" for 127.0.0.1 at 2025-09-08 13:28:55 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 27 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 27 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 20ms (Views: 1.5ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:28:55 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats/27/messages" for 127.0.0.1 at 2025-09-08 13:28:58 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hola"}, "chat_id"=>"27"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 27 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (27, 'Hola', 'user', '2025-09-08 07:58:58.704936', '2025-09-08 07:58:58.704936') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: insufficient_quota - You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.8ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (27, 'I''m sorry, but I''ve reached my usage limit. Please try again later or contact support.', 'assistant', '2025-09-08 07:58:59.629134', '2025-09-08 07:58:59.629134') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:64:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:66:in `update_chat_title'
  [1m[36mChat Update (1.3ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Hola', "updated_at" = '2025-09-08 07:58:59.637762' WHERE "chats"."id" = 27 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:66:in `update_chat_title'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:66:in `update_chat_title'
Completed 201 Created in 967ms (Views: 0.2ms | ActiveRecord: 4.8ms (7 queries, 0 cached) | GC: 0.1ms)


Started POST "/chats/27/messages" for 127.0.0.1 at 2025-09-08 13:29:05 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Buenes"}, "chat_id"=>"27"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 27 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (27, 'Buenes', 'user', '2025-09-08 07:59:05.626264', '2025-09-08 07:59:05.626264') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: insufficient_quota - You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (3.2ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (27, 'I''m sorry, but I''ve reached my usage limit. Please try again later or contact support.', 'assistant', '2025-09-08 07:59:06.791321', '2025-09-08 07:59:06.791321') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 1209ms (Views: 0.2ms | ActiveRecord: 4.5ms (5 queries, 0 cached) | GC: 3.5ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:29:09 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 9.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.0ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 9.8ms | ActiveRecord: 0.5ms (18 queries, 8 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:29:09 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 13:29:16 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Chat 9/8/2025, 1:29:16 PM"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Chat 9/8/2025, 1:29:16 PM', '2025-09-08 07:59:16.834593', '2025-09-08 07:59:16.834593') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 26ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/28" for 127.0.0.1 at 2025-09-08 13:29:16 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"28"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 28 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 28 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.6ms | GC: 1.0ms)
Completed 200 OK in 21ms (Views: 2.7ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 1.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:29:16 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats/28/messages" for 127.0.0.1 at 2025-09-08 13:29:20 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hello Friend"}, "chat_id"=>"28"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 28 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (28, 'Hello Friend', 'user', '2025-09-08 07:59:20.322980', '2025-09-08 07:59:20.322980') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: insufficient_quota - You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (28, 'I''m sorry, but I''ve reached my usage limit. Please try again later or contact support.', 'assistant', '2025-09-08 07:59:20.858697', '2025-09-08 07:59:20.858697') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:64:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:66:in `update_chat_title'
  [1m[36mChat Update (0.7ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Hello Friend', "updated_at" = '2025-09-08 07:59:20.863897' WHERE "chats"."id" = 28 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:66:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:66:in `update_chat_title'
Completed 201 Created in 575ms (Views: 0.1ms | ActiveRecord: 3.0ms (7 queries, 0 cached) | GC: 0.5ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:29:22 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 12.8ms | GC: 1.1ms)
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | GC: 1.1ms)
Completed 200 OK in 44ms (Views: 12.8ms | ActiveRecord: 0.6ms (22 queries, 10 cached) | GC: 1.1ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:29:22 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started GET "/chats/27" for 127.0.0.1 at 2025-09-08 13:29:22 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"27"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 27 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 27 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.1ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.1ms)
Completed 200 OK in 34ms (Views: 2.7ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.1ms)


Started GET "/chats/28" for 127.0.0.1 at 2025-09-08 13:29:30 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"28"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 28 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 28 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 29ms (Views: 2.2ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/chats/28/messages" for 127.0.0.1 at 2025-09-08 13:29:34 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Buenes"}, "chat_id"=>"28"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 28 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (28, 'Buenes', 'user', '2025-09-08 07:59:34.083916', '2025-09-08 07:59:34.083916') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: insufficient_quota - You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.9ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (28, 'I''m sorry, but I''ve reached my usage limit. Please try again later or contact support.', 'assistant', '2025-09-08 07:59:34.528647', '2025-09-08 07:59:34.528647') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 482ms (Views: 0.2ms | ActiveRecord: 3.3ms (5 queries, 0 cached) | GC: 1.6ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:29:35 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 12.5ms | GC: 1.6ms)
  Rendered layout layouts/application.html.erb (Duration: 12.8ms | GC: 1.6ms)
Completed 200 OK in 42ms (Views: 12.5ms | ActiveRecord: 0.5ms (22 queries, 10 cached) | GC: 1.6ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:29:35 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats" for 127.0.0.1 at 2025-09-08 13:29:39 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Chat 9/8/2025, 1:29:39 PM"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.8ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at") VALUES ('Chat 9/8/2025, 1:29:39 PM', '2025-09-08 07:59:39.793356', '2025-09-08 07:59:39.793356') RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 33ms (Views: 0.1ms | ActiveRecord: 0.9ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/29" for 127.0.0.1 at 2025-09-08 13:29:39 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 29 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 29 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 1.7ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:29:39 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
Started POST "/chats/29/messages" for 127.0.0.1 at 2025-09-08 13:29:51 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hello how are you doing I hope you are fine"}, "chat_id"=>"29"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 29 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (29, 'Hello how are you doing I hope you are fine', 'user', '2025-09-08 07:59:51.792216', '2025-09-08 07:59:51.792216') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:8:in `map'
OpenAI API error: insufficient_quota - You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (2.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at") VALUES (29, 'I''m sorry, but I''ve reached my usage limit. Please try again later or contact support.', 'assistant', '2025-09-08 07:59:52.156190', '2025-09-08 07:59:52.156190') RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:64:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:66:in `update_chat_title'
  [1m[36mChat Update (1.4ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Hello how are you doing I hope you are fine', "updated_at" = '2025-09-08 07:59:52.165422' WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:66:in `update_chat_title'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:66:in `update_chat_title'
Completed 201 Created in 404ms (Views: 0.2ms | ActiveRecord: 5.4ms (7 queries, 0 cached) | GC: 1.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 13:29:53 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:17
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:32
  Rendered chats/index.html.erb within layouts/application (Duration: 15.3ms | GC: 2.3ms)
  Rendered layout layouts/application.html.erb (Duration: 15.7ms | GC: 2.3ms)
Completed 200 OK in 47ms (Views: 15.3ms | ActiveRecord: 0.7ms (26 queries, 12 cached) | GC: 2.3ms)


Started GET "/.well-known/appspecific/com.chrome.devtools.json" for 127.0.0.1 at 2025-09-08 13:29:54 +0530
  
ActionController::RoutingError (No route matches [GET] "/.well-known/appspecific/com.chrome.devtools.json"):
  
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = 'environment' ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1 /*application='LittlebirdBot'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Migrating to AddTokenTrackingToMessages (20250908081631)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "messages" ADD "input_tokens" integer /*application='LittlebirdBot'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "messages" ADD "output_tokens" integer /*application='LittlebirdBot'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mALTER TABLE "messages" ADD "total_tokens" integer /*application='LittlebirdBot'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250908081631') RETURNING "version" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
Migrating to AddTokenTrackingToChats (20250908081637)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "chats" ADD "total_input_tokens" integer /*application='LittlebirdBot'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "chats" ADD "total_output_tokens" integer /*application='LittlebirdBot'*/[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "chats" ADD "total_tokens" integer /*application='LittlebirdBot'*/[0m
  [1m[35m (0.0ms)[0m  [1m[35mALTER TABLE "chats" ADD "model_used" varchar /*application='LittlebirdBot'*/[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20250908081637') RETURNING "version" /*application='LittlebirdBot'*/[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*application='LittlebirdBot'*/[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m and [36mOPENAI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m and [36mOPENAI_API_KEY[0m
[dotenv] Loaded [33m.env[0m
Started GET "/chats" for 127.0.0.1 at 2025-09-08 16:28:04 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.3ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 32.8ms | GC: 7.8ms)
  Rendered layout layouts/application.html.erb (Duration: 50.6ms | GC: 8.8ms)
Completed 200 OK in 102ms (Views: 50.8ms | ActiveRecord: 1.8ms (26 queries, 12 cached) | GC: 8.8ms)


Started GET "/chats/29" for 127.0.0.1 at 2025-09-08 16:28:07 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 29 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 29 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 28ms (Views: 2.5ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.4ms)


Started POST "/chats/29/messages" for 127.0.0.1 at 2025-09-08 16:28:10 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"29"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 29 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (29, 'Hi', 'user', '2025-09-08 10:58:10.650911', '2025-09-08 10:58:10.650911', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 39 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 1, "total_output_tokens" = 0, "total_tokens" = 1 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 29: Sending 49 input tokens to gpt-3.5-turbo-1106
OpenAI API error for chat 29: insufficient_quota - You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (6.1ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (29, 'I''m sorry, but I''ve reached my usage limit. Please try again later or contact support.', 'assistant', '2025-09-08 10:58:11.316692', '2025-09-08 10:58:11.316692', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 20, "total_tokens" = 20 WHERE "messages"."id" = 40 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 1, "total_output_tokens" = 20, "total_tokens" = 21 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 720ms (Views: 0.2ms | ActiveRecord: 7.8ms (16 queries, 2 cached) | GC: 26.1ms)


[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
Started POST "/chats/29/messages" for 127.0.0.1 at 2025-09-08 16:29:30 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"29"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 29 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (29, 'Hi', 'user', '2025-09-08 10:59:30.945718', '2025-09-08 10:59:30.945718', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 41 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 20, "total_tokens" = 22 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 29: Sending 80 input tokens to gpt-3.5-turbo-1106
Chat 29: API returned usage - input: 75, output: 9, total: 84
  [1m[36mChat Update (0.3ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-3.5-turbo-1106' WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 9, "total_tokens" = 9 WHERE "messages"."id" = 40 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 AND "messages"."id" != 41 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 AND "messages"."id" != 41[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.3ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 65, "output_tokens" = 0, "total_tokens" = 65 WHERE "messages"."id" = 41 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.2ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 66, "total_output_tokens" = 9, "total_tokens" = 75 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 29 estimated cost: $8.4e-05 (input: $6.6e-05, output: $1.8e-05)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.8ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (29, 'Hello! How can I assist you today?', 'assistant', '2025-09-08 10:59:34.144075', '2025-09-08 10:59:34.144075', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 9, "total_tokens" = 9 WHERE "messages"."id" = 42 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 66, "total_output_tokens" = 18, "total_tokens" = 84 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 3248ms (Views: 0.2ms | ActiveRecord: 5.3ms (25 queries, 3 cached) | GC: 10.6ms)


Started POST "/chats/29/messages" for 127.0.0.1 at 2025-09-08 16:29:55 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"I am 6 foot in hight, What should be my BMI?"}, "chat_id"=>"29"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 29 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (29, 'I am 6 foot in hight, What should be my BMI?', 'user', '2025-09-08 10:59:55.156152', '2025-09-08 10:59:55.156152', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 15, "output_tokens" = 0, "total_tokens" = 15 WHERE "messages"."id" = 43 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 81, "total_output_tokens" = 18, "total_tokens" = 99 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 29: Sending 114 input tokens to gpt-3.5-turbo-1106
Chat 29: API returned usage - input: 107, output: 110, total: 217
  [1m[36mChat Update (0.2ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-3.5-turbo-1106' WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 110, "total_tokens" = 110 WHERE "messages"."id" = 42 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 AND "messages"."id" != 43 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 AND "messages"."id" != 43[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = -78, "output_tokens" = 0, "total_tokens" = -78 WHERE "messages"."id" = 43 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = -12, "total_output_tokens" = 119, "total_tokens" = 107 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 29 estimated cost: $0.000226 (input: $-1.2e-05, output: $0.000238)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.8ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (29, 'Your Body Mass Index (BMI) is calculated using your weight and height. A healthy BMI for an adult is typically considered to be in the range of 18.5 to 24.9. 

To calculate your BMI, you can use the following formula:
BMI = (weight in pounds / (height in inches x height in inches)) x 703

For a person who is 6 feet tall (which is 72 inches), a healthy weight range would be between 140 and 183 pounds to fall within the healthy BMI range.', 'assistant', '2025-09-08 10:59:59.346737', '2025-09-08 10:59:59.346737', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 110, "total_tokens" = 110 WHERE "messages"."id" = 44 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = -12, "total_output_tokens" = 229, "total_tokens" = 217 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 4223ms (Views: 0.1ms | ActiveRecord: 2.9ms (25 queries, 3 cached) | GC: 0.0ms)


Started POST "/chats/29/messages" for 127.0.0.1 at 2025-09-08 16:30:05 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Do you know my height?"}, "chat_id"=>"29"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 29 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (29, 'Do you know my height?', 'user', '2025-09-08 11:00:05.980291', '2025-09-08 11:00:05.980291', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 6, "output_tokens" = 0, "total_tokens" = 6 WHERE "messages"."id" = 45 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = -6, "total_output_tokens" = 229, "total_tokens" = 223 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 29: Sending 240 input tokens to gpt-3.5-turbo-1106
Chat 29: API returned usage - input: 231, output: 30, total: 261
  [1m[36mChat Update (0.3ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-3.5-turbo-1106' WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 30, "total_tokens" = 30 WHERE "messages"."id" = 44 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 AND "messages"."id" != 45 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 AND "messages"."id" != 45[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 94, "output_tokens" = 0, "total_tokens" = 94 WHERE "messages"."id" = 45 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 82, "total_output_tokens" = 149, "total_tokens" = 231 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 29 estimated cost: $0.00038 (input: $8.2e-05, output: $0.000298)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (29, 'Apologies for the confusion. You mentioned that you are 6 feet tall. Based on the information you provided, your height is 6 feet.', 'assistant', '2025-09-08 11:00:08.177595', '2025-09-08 11:00:08.177595', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 30, "total_tokens" = 30 WHERE "messages"."id" = 46 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 82, "total_output_tokens" = 179, "total_tokens" = 261 WHERE "chats"."id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 2234ms (Views: 0.1ms | ActiveRecord: 3.0ms (25 queries, 3 cached) | GC: 19.2ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 16:30:20 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 13.9ms | GC: 0.9ms)
  Rendered layout layouts/application.html.erb (Duration: 25.9ms | GC: 7.5ms)
Completed 200 OK in 56ms (Views: 27.0ms | ActiveRecord: 0.9ms (26 queries, 12 cached) | GC: 7.7ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 16:30:25 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.2ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 29ms (Views: 2.6ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 0.5ms)


Started GET "/usage/daily" for 127.0.0.1 at 2025-09-08 16:30:31 +0530
Processing by UsageController#daily as HTML
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
Completed 406 Not Acceptable in 33ms (ActiveRecord: 0.3ms (7 queries, 2 cached) | GC: 0.1ms)


  
ActionController::MissingExactTemplate (UsageController#daily is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage/monthly" for 127.0.0.1 at 2025-09-08 16:30:32 +0530
Processing by UsageController#monthly as HTML
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
Completed 406 Not Acceptable in 20ms (ActiveRecord: 0.2ms (7 queries, 2 cached) | GC: 0.0ms)


  
ActionController::MissingExactTemplate (UsageController#monthly is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2025-09-08 16:30:32 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 11.0ms | GC: 1.3ms)
  Rendered layout layouts/application.html.erb (Duration: 11.3ms | GC: 1.3ms)
Completed 200 OK in 29ms (Views: 10.9ms | ActiveRecord: 0.5ms (26 queries, 12 cached) | GC: 1.3ms)


Started GET "/chats/2" for 127.0.0.1 at 2025-09-08 16:30:35 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 2 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 2 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 5.3ms | GC: 2.9ms)
  Rendered layout layouts/application.html.erb (Duration: 6.6ms | GC: 3.7ms)
Completed 200 OK in 38ms (Views: 6.7ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 3.7ms)


Started GET "/chats/3" for 127.0.0.1 at 2025-09-08 16:30:36 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mChat Load (0.5ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 3 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 3 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 3.1ms | GC: 1.6ms)
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | GC: 2.5ms)
Completed 200 OK in 32ms (Views: 4.5ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 3.9ms)


Started GET "/chats/29" for 127.0.0.1 at 2025-09-08 16:30:38 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"29"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 29 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 29 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 9.1ms | GC: 6.6ms)
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | GC: 6.6ms)
Completed 200 OK in 36ms (Views: 8.8ms | ActiveRecord: 1.0ms (3 queries, 0 cached) | GC: 7.7ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 16:30:38 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 40ms (Views: 0.7ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 1.4ms)


Started GET "/usage/top_chats" for 127.0.0.1 at 2025-09-08 16:31:05 +0530
Processing by UsageController#top_chats as HTML
  [1m[35mSQL (0.1ms)[0m  [1m[34mSELECT DISTINCT "chats"."id" FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL ORDER BY "chats"."total_tokens" DESC LIMIT 10 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[35mSQL (0.1ms)[0m  [1m[34mSELECT "chats"."id" AS t0_r0, "chats"."title" AS t0_r1, "chats"."created_at" AS t0_r2, "chats"."updated_at" AS t0_r3, "chats"."total_input_tokens" AS t0_r4, "chats"."total_output_tokens" AS t0_r5, "chats"."total_tokens" AS t0_r6, "chats"."model_used" AS t0_r7, "messages"."id" AS t1_r0, "messages"."chat_id" AS t1_r1, "messages"."content" AS t1_r2, "messages"."role" AS t1_r3, "messages"."created_at" AS t1_r4, "messages"."updated_at" AS t1_r5, "messages"."input_tokens" AS t1_r6, "messages"."output_tokens" AS t1_r7, "messages"."total_tokens" AS t1_r8 FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL AND "chats"."id" = 29 ORDER BY "chats"."total_tokens" DESC /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
Completed 406 Not Acceptable in 33ms (ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.1ms)


  
ActionController::MissingExactTemplate (UsageController#top_chats is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage" for 127.0.0.1 at 2025-09-08 16:31:08 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 0.9ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 1.4ms)


Started GET "/usage/daily" for 127.0.0.1 at 2025-09-08 16:31:09 +0530
Processing by UsageController#daily as HTML
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
Completed 406 Not Acceptable in 22ms (ActiveRecord: 0.2ms (7 queries, 2 cached) | GC: 0.1ms)


  
ActionController::MissingExactTemplate (UsageController#daily is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage" for 127.0.0.1 at 2025-09-08 16:31:10 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 0.9ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 1.2ms)


Started GET "/usage/monthly" for 127.0.0.1 at 2025-09-08 16:31:11 +0530
Processing by UsageController#monthly as HTML
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
Completed 406 Not Acceptable in 33ms (ActiveRecord: 0.2ms (7 queries, 2 cached) | GC: 0.2ms)


  
ActionController::MissingExactTemplate (UsageController#monthly is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage" for 127.0.0.1 at 2025-09-08 16:31:13 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 4.0ms | GC: 3.0ms)
Completed 200 OK in 58ms (Views: 4.2ms | ActiveRecord: 0.7ms (22 queries, 6 cached) | GC: 19.7ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 16:31:14 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 12.8ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | GC: 1.9ms)
Completed 200 OK in 43ms (Views: 13.6ms | ActiveRecord: 0.6ms (26 queries, 12 cached) | GC: 1.9ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 16:32:22 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"USA information"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at", "total_input_tokens", "total_output_tokens", "total_tokens", "model_used") VALUES ('USA information', '2025-09-08 11:02:22.056497', '2025-09-08 11:02:22.056497', NULL, NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 29ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/30" for 127.0.0.1 at 2025-09-08 16:32:22 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"30"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 30 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 30 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 19ms (Views: 1.5ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/chats/30/messages" for 127.0.0.1 at 2025-09-08 16:32:30 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the president on USA?"}, "chat_id"=>"30"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 30 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'Who is the president on USA?', 'user', '2025-09-08 11:02:30.112564', '2025-09-08 11:02:30.112564', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 7, "output_tokens" = 0, "total_tokens" = 7 WHERE "messages"."id" = 47 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 7, "total_output_tokens" = 0, "total_tokens" = 7 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 30: Sending 15 input tokens to gpt-3.5-turbo-1106
Chat 30: API returned usage - input: 14, output: 17, total: 31
  [1m[36mChat Update (0.3ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-3.5-turbo-1106' WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 47 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 47[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 14, "output_tokens" = 0, "total_tokens" = 14 WHERE "messages"."id" = 47 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 14, "total_output_tokens" = 0, "total_tokens" = 14 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 30 estimated cost: $1.4e-05 (input: $1.4e-05, output: $0.0)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.2ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'As of September 2021, the president of the United States is Joe Biden.', 'assistant', '2025-09-08 11:02:32.210832', '2025-09-08 11:02:32.210832', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 17, "total_tokens" = 17 WHERE "messages"."id" = 48 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 14, "total_output_tokens" = 17, "total_tokens" = 31 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:125:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:127:in `update_chat_title'
  [1m[36mChat Update (0.8ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Who is the president on USA?', "updated_at" = '2025-09-08 11:02:32.219908' WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:127:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:127:in `update_chat_title'
Completed 201 Created in 2135ms (Views: 0.1ms | ActiveRecord: 4.6ms (26 queries, 3 cached) | GC: 3.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 16:32:37 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 17.1ms | GC: 2.4ms)
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | GC: 2.4ms)
Completed 200 OK in 48ms (Views: 16.8ms | ActiveRecord: 0.8ms (30 queries, 14 cached) | GC: 2.4ms)


Started GET "/chats/30" for 127.0.0.1 at 2025-09-08 16:32:39 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"30"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 30 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 30 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.1ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.4ms)
Completed 200 OK in 33ms (Views: 2.7ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.4ms)


Started POST "/chats/30/messages" for 127.0.0.1 at 2025-09-08 16:32:49 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the current president of 2025?"}, "chat_id"=>"30"}
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 30 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'Who is the current president of 2025?', 'user', '2025-09-08 11:02:49.294274', '2025-09-08 11:02:49.294274', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 10, "output_tokens" = 0, "total_tokens" = 10 WHERE "messages"."id" = 49 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 24, "total_output_tokens" = 17, "total_tokens" = 41 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 30: Sending 52 input tokens to gpt-3.5-turbo-1106
Chat 30: API returned usage - input: 49, output: 40, total: 89
  [1m[36mChat Update (0.3ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-3.5-turbo-1106' WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 40, "total_tokens" = 40 WHERE "messages"."id" = 48 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.2ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 49 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 49[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = -5, "output_tokens" = 0, "total_tokens" = -5 WHERE "messages"."id" = 49 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 9, "total_output_tokens" = 40, "total_tokens" = 49 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 30 estimated cost: $8.9e-05 (input: $9.0e-06, output: $8.0e-05)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.2ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'I''m sorry, but as an AI, I do not have the capability to predict the future. As of now, I cannot provide information on the president of the United States in 2025.', 'assistant', '2025-09-08 11:02:51.738063', '2025-09-08 11:02:51.738063', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 40, "total_tokens" = 40 WHERE "messages"."id" = 50 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 9, "total_output_tokens" = 80, "total_tokens" = 89 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 2483ms (Views: 0.2ms | ActiveRecord: 4.1ms (25 queries, 3 cached) | GC: 0.6ms)


Started POST "/chats/30/messages" for 127.0.0.1 at 2025-09-08 16:33:09 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the president of United states in 2024"}, "chat_id"=>"30"}
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 30 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'Who is the president of United states in 2024', 'user', '2025-09-08 11:03:09.734251', '2025-09-08 11:03:09.734251', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 11, "output_tokens" = 0, "total_tokens" = 11 WHERE "messages"."id" = 51 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 20, "total_output_tokens" = 80, "total_tokens" = 100 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 30: Sending 113 input tokens to gpt-3.5-turbo-1106
Chat 30: API returned usage - input: 108, output: 44, total: 152
  [1m[36mChat Update (0.2ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-3.5-turbo-1106' WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 44, "total_tokens" = 44 WHERE "messages"."id" = 50 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 51 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 51[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 15, "output_tokens" = 0, "total_tokens" = 15 WHERE "messages"."id" = 51 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 24, "total_output_tokens" = 84, "total_tokens" = 108 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 30 estimated cost: $0.000192 (input: $2.4e-05, output: $0.000168)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.3ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'As an AI, I cannot predict or provide information on specific future events, including the president of the United States in 2024. I recommend checking reliable news sources for the most up-to-date information on political leaders.', 'assistant', '2025-09-08 11:03:10.888054', '2025-09-08 11:03:10.888054', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 44, "total_tokens" = 44 WHERE "messages"."id" = 52 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 24, "total_output_tokens" = 128, "total_tokens" = 152 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 1194ms (Views: 0.1ms | ActiveRecord: 3.6ms (25 queries, 3 cached) | GC: 3.5ms)


Started POST "/chats/30/messages" for 127.0.0.1 at 2025-09-08 16:33:17 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"What is the date today?"}, "chat_id"=>"30"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 30 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'What is the date today?', 'user', '2025-09-08 11:03:17.651194', '2025-09-08 11:03:17.651194', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 6, "output_tokens" = 0, "total_tokens" = 6 WHERE "messages"."id" = 53 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 30, "total_output_tokens" = 128, "total_tokens" = 158 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 30: Sending 173 input tokens to gpt-3.5-turbo-1106
Chat 30: API returned usage - input: 166, output: 53, total: 219
  [1m[36mChat Update (0.2ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-3.5-turbo-1106' WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 53, "total_tokens" = 53 WHERE "messages"."id" = 52 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 53 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 53[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 5, "output_tokens" = 0, "total_tokens" = 5 WHERE "messages"."id" = 53 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 29, "total_output_tokens" = 137, "total_tokens" = 166 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 30 estimated cost: $0.000303 (input: $2.9e-05, output: $0.000274)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.1ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'I''m an AI and my responses are based on the date of the interaction. As of my last training data, I do not have real-time capabilities to provide the current date. I recommend checking the date on a calendar or electronic device for the most accurate information.', 'assistant', '2025-09-08 11:03:19.406954', '2025-09-08 11:03:19.406954', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 53, "total_tokens" = 53 WHERE "messages"."id" = 54 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 29, "total_output_tokens" = 190, "total_tokens" = 219 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 1793ms (Views: 0.2ms | ActiveRecord: 3.7ms (25 queries, 3 cached) | GC: 0.5ms)


Started POST "/chats/30/messages" for 127.0.0.1 at 2025-09-08 16:33:50 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the president of USA?"}, "chat_id"=>"30"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 30 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'Who is the president of USA?', 'user', '2025-09-08 11:03:50.377851', '2025-09-08 11:03:50.377851', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 7, "output_tokens" = 0, "total_tokens" = 7 WHERE "messages"."id" = 55 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 36, "total_output_tokens" = 190, "total_tokens" = 226 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 30: Sending 243 input tokens to gpt-3.5-turbo
Chat 30: API returned usage - input: 234, output: 17, total: 251
  [1m[36mChat Update (0.4ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-3.5-turbo' WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 17, "total_tokens" = 17 WHERE "messages"."id" = 54 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.2ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 55 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 55[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 51, "output_tokens" = 0, "total_tokens" = 51 WHERE "messages"."id" = 55 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.7ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 80, "total_output_tokens" = 154, "total_tokens" = 234 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 30 estimated cost: $0.000388 (input: $8.0e-05, output: $0.000308)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.2ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'As of September 2021, the President of the United States is Joe Biden.', 'assistant', '2025-09-08 11:03:51.171251', '2025-09-08 11:03:51.171251', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 17, "total_tokens" = 17 WHERE "messages"."id" = 56 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 80, "total_output_tokens" = 171, "total_tokens" = 251 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 823ms (Views: 0.2ms | ActiveRecord: 5.2ms (25 queries, 3 cached) | GC: 2.3ms)


[dotenv] Set [36mOPENAI_ACCESS_TOKEN[0m
[dotenv] Loaded [33m.env[0m
Started POST "/chats/30/messages" for 127.0.0.1 at 2025-09-08 16:34:19 +0530
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC /*application='LittlebirdBot'*/[0m
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the current president of USA in 2025?"}, "chat_id"=>"30"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 30 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'Who is the current president of USA in 2025?', 'user', '2025-09-08 11:04:19.844007', '2025-09-08 11:04:19.844007', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 12, "output_tokens" = 0, "total_tokens" = 12 WHERE "messages"."id" = 57 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 92, "total_output_tokens" = 171, "total_tokens" = 263 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 30: Sending 282 input tokens to gpt-3.5-turbo
Chat 30: API returned usage - input: 271, output: 55, total: 326
  [1m[36mChat Update (0.3ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-3.5-turbo' WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 55, "total_tokens" = 55 WHERE "messages"."id" = 56 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 57 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 AND "messages"."id" != 57[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = -18, "output_tokens" = 0, "total_tokens" = -18 WHERE "messages"."id" = 57 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 62, "total_output_tokens" = 209, "total_tokens" = 271 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 30 estimated cost: $0.00048 (input: $6.2e-05, output: $0.000418)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.3ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (30, 'As an AI, I do not have the ability to predict the future or provide real-time information beyond my last update in September 2021. I recommend checking a reliable news source for the most up-to-date information on the president of the United States in 2025.', 'assistant', '2025-09-08 11:04:21.531185', '2025-09-08 11:04:21.531185', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 55, "total_tokens" = 55 WHERE "messages"."id" = 58 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 62, "total_output_tokens" = 264, "total_tokens" = 326 WHERE "chats"."id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 1738ms (Views: 0.2ms | ActiveRecord: 4.8ms (25 queries, 3 cached) | GC: 11.4ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 16:35:04 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 23.1ms | GC: 7.4ms)
  Rendered layout layouts/application.html.erb (Duration: 27.6ms | GC: 7.4ms)
Completed 200 OK in 49ms (Views: 28.1ms | ActiveRecord: 1.3ms (30 queries, 14 cached) | GC: 7.4ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 16:35:12 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"USA information"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.5ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at", "total_input_tokens", "total_output_tokens", "total_tokens", "model_used") VALUES ('USA information', '2025-09-08 11:05:12.743613', '2025-09-08 11:05:12.743613', NULL, NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 25ms (Views: 0.1ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/31" for 127.0.0.1 at 2025-09-08 16:35:12 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"31"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 31 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 31 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 21ms (Views: 1.8ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.4ms)


Started POST "/chats/31/messages" for 127.0.0.1 at 2025-09-08 16:35:21 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the current president of USA?"}, "chat_id"=>"31"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 31 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'Who is the current president of USA?', 'user', '2025-09-08 11:05:21.296206', '2025-09-08 11:05:21.296206', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 8, "output_tokens" = 0, "total_tokens" = 8 WHERE "messages"."id" = 59 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 8, "total_output_tokens" = 0, "total_tokens" = 8 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 31: Sending 15 input tokens to gpt-4o
Chat 31: API returned usage - input: 15, output: 37, total: 52
  [1m[36mChat Update (0.4ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4o' WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."id" != 59 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."id" != 59[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 15, "output_tokens" = 0, "total_tokens" = 15 WHERE "messages"."id" = 59 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 15, "total_output_tokens" = 0, "total_tokens" = 15 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 31 estimated cost: $7.5e-05 (input: $7.5e-05, output: $0.0)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'As of my last update, the President of the United States is Joe Biden. However, please verify with a current source, as this information may have changed since October 2023.', 'assistant', '2025-09-08 11:05:22.563466', '2025-09-08 11:05:22.563466', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 37, "total_tokens" = 37 WHERE "messages"."id" = 60 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 15, "total_output_tokens" = 37, "total_tokens" = 52 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:125:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:127:in `update_chat_title'
  [1m[36mChat Update (0.7ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Who is the current president of USA?', "updated_at" = '2025-09-08 11:05:22.569173' WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:127:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:127:in `update_chat_title'
Completed 201 Created in 1305ms (Views: 0.1ms | ActiveRecord: 4.0ms (26 queries, 3 cached) | GC: 1.3ms)


Started POST "/chats/31/messages" for 127.0.0.1 at 2025-09-08 16:35:56 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the current president of USA as of 2025?"}, "chat_id"=>"31"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 31 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'Who is the current president of USA as of 2025?', 'user', '2025-09-08 11:05:56.514595', '2025-09-08 11:05:56.514595', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 13, "output_tokens" = 0, "total_tokens" = 13 WHERE "messages"."id" = 61 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 28, "total_output_tokens" = 37, "total_tokens" = 65 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 31: Sending 73 input tokens to gpt-4
Chat 31: API returned usage - input: 73, output: 44, total: 117
  [1m[36mChat Update (0.2ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4' WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 44, "total_tokens" = 44 WHERE "messages"."id" = 60 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."id" != 61 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."id" != 61[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 14, "output_tokens" = 0, "total_tokens" = 14 WHERE "messages"."id" = 61 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 29, "total_output_tokens" = 44, "total_tokens" = 73 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 31 estimated cost: $0.00351 (input: $0.00087, output: $0.00264)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'Sorry, as an AI developed by OpenAI with information updated up to October 2023, I don''t have the ability to provide real-time or future data. Please check the most recent sources for the current information.', 'assistant', '2025-09-08 11:06:01.133783', '2025-09-08 11:06:01.133783', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 44, "total_tokens" = 44 WHERE "messages"."id" = 62 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 29, "total_output_tokens" = 88, "total_tokens" = 117 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 4646ms (Views: 0.1ms | ActiveRecord: 3.0ms (25 queries, 3 cached) | GC: 0.5ms)


Started POST "/chats/31/messages" for 127.0.0.1 at 2025-09-08 16:38:07 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the current president of USA as of 2025?"}, "chat_id"=>"31"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 31 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.3ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'Who is the current president of USA as of 2025?', 'user', '2025-09-08 11:08:07.759201', '2025-09-08 11:08:07.759201', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 13, "output_tokens" = 0, "total_tokens" = 13 WHERE "messages"."id" = 63 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 42, "total_output_tokens" = 88, "total_tokens" = 130 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 31: Sending 142 input tokens to gpt-5-mini
OpenAI API error for chat 31: invalid_request_error - Unsupported parameter: 'max_tokens' is not supported with this model. Use 'max_completion_tokens' instead.
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (12.3ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'I''m sorry, there was an issue with your request. Please try again.', 'assistant', '2025-09-08 11:08:08.443784', '2025-09-08 11:08:08.443784', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 16, "total_tokens" = 16 WHERE "messages"."id" = 64 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 42, "total_output_tokens" = 104, "total_tokens" = 146 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 727ms (Views: 0.2ms | ActiveRecord: 14.0ms (16 queries, 2 cached) | GC: 10.6ms)


Started POST "/chats/31/messages" for 127.0.0.1 at 2025-09-08 16:38:12 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the current president of USA as of 2025?"}, "chat_id"=>"31"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 31 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'Who is the current president of USA as of 2025?', 'user', '2025-09-08 11:08:12.093810', '2025-09-08 11:08:12.093810', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 13, "output_tokens" = 0, "total_tokens" = 13 WHERE "messages"."id" = 65 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 55, "total_output_tokens" = 104, "total_tokens" = 159 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 31: Sending 180 input tokens to gpt-5-mini
OpenAI API error for chat 31: invalid_request_error - Unsupported parameter: 'max_tokens' is not supported with this model. Use 'max_completion_tokens' instead.
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'I''m sorry, there was an issue with your request. Please try again.', 'assistant', '2025-09-08 11:08:14.117910', '2025-09-08 11:08:14.117910', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 16, "total_tokens" = 16 WHERE "messages"."id" = 66 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 55, "total_output_tokens" = 120, "total_tokens" = 175 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 2059ms (Views: 0.1ms | ActiveRecord: 2.1ms (16 queries, 2 cached) | GC: 0.8ms)


Started POST "/chats/31/messages" for 127.0.0.1 at 2025-09-08 16:39:27 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the current president of USA as of 2025?"}, "chat_id"=>"31"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 31 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'Who is the current president of USA as of 2025?', 'user', '2025-09-08 11:09:27.181282', '2025-09-08 11:09:27.181282', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 13, "output_tokens" = 0, "total_tokens" = 13 WHERE "messages"."id" = 67 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:28:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 68, "total_output_tokens" = 120, "total_tokens" = 188 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:30:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:51:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:51:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 31: Sending 218 input tokens to gpt-4o-mini
Chat 31: API returned usage - input: 209, output: 49, total: 258
  [1m[36mChat Update (0.2ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4o-mini' WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 49, "total_tokens" = 49 WHERE "messages"."id" = 66 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."id" != 67 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."id" != 67[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 67 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:28:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 56, "total_output_tokens" = 153, "total_tokens" = 209 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:30:in `update_token_totals'
Chat 31 estimated cost: $0.0001 (input: $8.0e-06, output: $9.2e-05)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.8ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'I don''t have access to information beyond October 2023, so I can''t provide the name of the U.S. president in 2025. To find out who the current president is, please consult a reliable news source or official government website.', 'assistant', '2025-09-08 11:09:31.126197', '2025-09-08 11:09:31.126197', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 51, "total_tokens" = 51 WHERE "messages"."id" = 68 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:28:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 56, "total_output_tokens" = 204, "total_tokens" = 260 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:30:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 3974ms (Views: 0.1ms | ActiveRecord: 3.1ms (25 queries, 3 cached) | GC: 1.0ms)


Started POST "/chats/31/messages" for 127.0.0.1 at 2025-09-08 16:40:44 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the current president of USA as of 2025?"}, "chat_id"=>"31"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 31 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'Who is the current president of USA as of 2025?', 'user', '2025-09-08 11:10:44.611641', '2025-09-08 11:10:44.611641', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 13, "output_tokens" = 0, "total_tokens" = 13 WHERE "messages"."id" = 69 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:28:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 69, "total_output_tokens" = 204, "total_tokens" = 273 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:30:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:51:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:51:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 31: Sending 290 input tokens to gpt-4o-mini
Chat 31: API returned usage - input: 279, output: 56, total: 335
  [1m[36mChat Update (0.3ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4o-mini' WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 56, "total_tokens" = 56 WHERE "messages"."id" = 68 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.2ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."id" != 69 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."id" != 69[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 14, "output_tokens" = 0, "total_tokens" = 14 WHERE "messages"."id" = 69 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:28:in `update_token_totals'
  [1m[36mChat Update (0.2ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 70, "total_output_tokens" = 209, "total_tokens" = 279 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:30:in `update_token_totals'
Chat 31 estimated cost: $0.000136 (input: $1.1e-05, output: $0.000125)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.0ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'I apologize for any confusion, but I do not have access to real-time information or events that have occurred after October 2023. To find out who the current president of the United States is in 2025, I recommend checking a reliable news source or official government website.', 'assistant', '2025-09-08 11:10:46.766673', '2025-09-08 11:10:46.766673', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 56, "total_tokens" = 56 WHERE "messages"."id" = 70 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:28:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 70, "total_output_tokens" = 265, "total_tokens" = 335 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:30:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 2184ms (Views: 0.2ms | ActiveRecord: 4.1ms (25 queries, 3 cached) | GC: 6.6ms)


Started POST "/chats/31/messages" for 127.0.0.1 at 2025-09-08 16:41:02 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Who is the current president of USA as of 2025?"}, "chat_id"=>"31"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 31 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'Who is the current president of USA as of 2025?', 'user', '2025-09-08 11:11:02.210621', '2025-09-08 11:11:02.210621', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 13, "output_tokens" = 0, "total_tokens" = 13 WHERE "messages"."id" = 71 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:28:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 83, "total_output_tokens" = 265, "total_tokens" = 348 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:30:in `update_token_totals'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:51:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:51:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 31: Sending 356 input tokens to gpt-4o
Chat 31: API returned usage - input: 356, output: 59, total: 415
  [1m[36mChat Update (0.4ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4o' WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 59, "total_tokens" = 59 WHERE "messages"."id" = 70 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:77:in `generate_ai_response'
  [1m[36mMessage Sum (0.2ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."id" != 71 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 AND "messages"."id" != 71[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 18, "output_tokens" = 0, "total_tokens" = 18 WHERE "messages"."id" = 71 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:28:in `update_token_totals'
  [1m[36mChat Update (0.2ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 88, "total_output_tokens" = 268, "total_tokens" = 356 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:30:in `update_token_totals'
Chat 31 estimated cost: $0.00446 (input: $0.00044, output: $0.00402)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (1.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (31, 'Iâ€™m sorry, but I donâ€™t have the ability to provide real-time updates or future predictions beyond my last training data in October 2023. To find out who the current president of the United States is in 2025, please consult a reliable news source or check official government announcements.', 'assistant', '2025-09-08 11:11:03.441829', '2025-09-08 11:11:03.441829', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 59, "total_tokens" = 59 WHERE "messages"."id" = 72 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:28:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 88, "total_output_tokens" = 327, "total_tokens" = 415 WHERE "chats"."id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:30:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
Completed 201 Created in 1265ms (Views: 0.2ms | ActiveRecord: 5.2ms (25 queries, 3 cached) | GC: 3.1ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 16:43:59 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 18.3ms | GC: 2.7ms)
  Rendered layout layouts/application.html.erb (Duration: 19.3ms | GC: 2.7ms)
Completed 200 OK in 42ms (Views: 19.1ms | ActiveRecord: 1.6ms (34 queries, 16 cached) | GC: 3.0ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 16:44:00 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 4.9ms | GC: 3.5ms)
  Rendered layout layouts/application.html.erb (Duration: 5.4ms | GC: 3.5ms)
Completed 200 OK in 65ms (Views: 5.7ms | ActiveRecord: 1.4ms (22 queries, 6 cached) | GC: 21.6ms)


Started GET "/usage/top_chats" for 127.0.0.1 at 2025-09-08 16:44:20 +0530
Processing by UsageController#top_chats as HTML
  [1m[35mSQL (0.1ms)[0m  [1m[34mSELECT DISTINCT "chats"."id" FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL ORDER BY "chats"."total_tokens" DESC LIMIT 10 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[35mSQL (0.2ms)[0m  [1m[34mSELECT "chats"."id" AS t0_r0, "chats"."title" AS t0_r1, "chats"."created_at" AS t0_r2, "chats"."updated_at" AS t0_r3, "chats"."total_input_tokens" AS t0_r4, "chats"."total_output_tokens" AS t0_r5, "chats"."total_tokens" AS t0_r6, "chats"."model_used" AS t0_r7, "messages"."id" AS t1_r0, "messages"."chat_id" AS t1_r1, "messages"."content" AS t1_r2, "messages"."role" AS t1_r3, "messages"."created_at" AS t1_r4, "messages"."updated_at" AS t1_r5, "messages"."input_tokens" AS t1_r6, "messages"."output_tokens" AS t1_r7, "messages"."total_tokens" AS t1_r8 FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL AND "chats"."id" IN (31, 30, 29) ORDER BY "chats"."total_tokens" DESC /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
Completed 406 Not Acceptable in 35ms (ActiveRecord: 0.4ms (5 queries, 0 cached) | GC: 1.7ms)


  
ActionController::MissingExactTemplate (UsageController#top_chats is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2025-09-08 16:44:21 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.4ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 31.9ms | GC: 17.0ms)
  Rendered layout layouts/application.html.erb (Duration: 33.4ms | GC: 18.1ms)
Completed 200 OK in 63ms (Views: 32.6ms | ActiveRecord: 1.0ms (34 queries, 16 cached) | GC: 18.1ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 16:44:23 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Chat 9/8/2025, 4:44:23 PM"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at", "total_input_tokens", "total_output_tokens", "total_tokens", "model_used") VALUES ('Chat 9/8/2025, 4:44:23 PM', '2025-09-08 11:14:23.891046', '2025-09-08 11:14:23.891046', NULL, NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 33ms (Views: 0.1ms | ActiveRecord: 1.2ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/32" for 127.0.0.1 at 2025-09-08 16:44:23 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"32"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 32 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 32 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.3ms)
Completed 200 OK in 22ms (Views: 2.2ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.3ms)


Started POST "/chats/32/messages" for 127.0.0.1 at 2025-09-08 16:44:26 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hola"}, "chat_id"=>"32"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 32 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:44:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (32, 'Hola', 'user', '2025-09-08 11:14:26.743506', '2025-09-08 11:14:26.743506', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 73 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 1, "total_output_tokens" = 0, "total_tokens" = 1 WHERE "chats"."id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:89:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:50:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32[0m
  â†³ app/services/openai_service.rb:120:in `prepare_messages_for_api'
Chat 32: Sending 8 input tokens to gpt-4o
Chat 32: API returned usage - input: 8, output: 10, total: 18
  [1m[36mChat Update (0.2ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4o' WHERE "chats"."id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:51:in `generate_response'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:75:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 32 AND "messages"."id" != 73 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 32 AND "messages"."id" != 73[0m
  â†³ app/controllers/messages_controller.rb:121:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 8, "output_tokens" = 0, "total_tokens" = 8 WHERE "messages"."id" = 73 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:86:in `generate_ai_response'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 8, "total_output_tokens" = 0, "total_tokens" = 8 WHERE "chats"."id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
Chat 32 estimated cost: $4.0e-05 (input: $4.0e-05, output: $0.0)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Create (0.7ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (32, 'Â¡Hola! Â¿En quÃ© puedo ayudarte hoy?', 'assistant', '2025-09-08 11:14:30.127040', '2025-09-08 11:14:30.127040', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 11, "total_tokens" = 11 WHERE "messages"."id" = 74 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:26:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:27:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 8, "total_output_tokens" = 11, "total_tokens" = 19 WHERE "chats"."id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:29:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:12:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:18:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:125:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:127:in `update_chat_title'
  [1m[36mChat Update (0.6ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Hola', "updated_at" = '2025-09-08 11:14:30.132167' WHERE "chats"."id" = 32 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:127:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:127:in `update_chat_title'
Completed 201 Created in 3411ms (Views: 0.1ms | ActiveRecord: 2.9ms (26 queries, 3 cached) | GC: 0.6ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 16:44:35 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 19.2ms | GC: 1.5ms)
  Rendered layout layouts/application.html.erb (Duration: 19.6ms | GC: 1.5ms)
Completed 200 OK in 54ms (Views: 18.8ms | ActiveRecord: 1.0ms (38 queries, 18 cached) | GC: 3.9ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 16:44:36 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 42ms (Views: 1.0ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 1.7ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 16:45:05 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:21:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 15.9ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | GC: 0.8ms)
Completed 200 OK in 44ms (Views: 15.6ms | ActiveRecord: 0.7ms (38 queries, 18 cached) | GC: 1.3ms)


Started GET "/chats/30" for 127.0.0.1 at 2025-09-08 16:45:06 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"30"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 30 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 30 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 4.1ms | GC: 1.5ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 1.5ms)
Completed 200 OK in 34ms (Views: 4.7ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 1.5ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 19:01:10 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.7ms | GC: 0.1ms)
Completed 200 OK in 33ms (Views: 2.2ms | ActiveRecord: 0.9ms (22 queries, 6 cached) | GC: 3.5ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 19:01:13 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 25.1ms | GC: 3.9ms)
  Rendered layout layouts/application.html.erb (Duration: 25.5ms | GC: 3.9ms)
Completed 200 OK in 41ms (Views: 24.8ms | ActiveRecord: 1.1ms (38 queries, 18 cached) | GC: 3.9ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 19:01:15 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.3ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 1.4ms)
Completed 200 OK in 59ms (Views: 2.2ms | ActiveRecord: 0.7ms (22 queries, 6 cached) | GC: 21.1ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 19:01:16 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 19.9ms | GC: 2.2ms)
  Rendered layout layouts/application.html.erb (Duration: 20.4ms | GC: 2.2ms)
Completed 200 OK in 40ms (Views: 19.7ms | ActiveRecord: 0.9ms (38 queries, 18 cached) | GC: 2.2ms)


Started GET "/chats/32" for 127.0.0.1 at 2025-09-08 19:01:28 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"32"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 32 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 32 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 2.9ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 19:01:32 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 17.3ms | GC: 1.4ms)
  Rendered layout layouts/application.html.erb (Duration: 17.7ms | GC: 1.4ms)
Completed 200 OK in 46ms (Views: 17.1ms | ActiveRecord: 0.8ms (38 queries, 18 cached) | GC: 1.4ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 19:01:34 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | GC: 0.5ms)
Completed 200 OK in 27ms (Views: 1.1ms | ActiveRecord: 0.5ms (22 queries, 6 cached) | GC: 1.5ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 19:55:41 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.7ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 18.5ms | GC: 2.3ms)
  Rendered layout layouts/application.html.erb (Duration: 19.5ms | GC: 2.3ms)
Completed 200 OK in 41ms (Views: 18.8ms | ActiveRecord: 1.4ms (38 queries, 18 cached) | GC: 2.3ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 19:55:43 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | GC: 0.1ms)
Completed 200 OK in 36ms (Views: 1.3ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 0.7ms)


Started GET "/usage/top_chats" for 127.0.0.1 at 2025-09-08 19:55:44 +0530
Processing by UsageController#top_chats as HTML
  [1m[35mSQL (0.2ms)[0m  [1m[34mSELECT DISTINCT "chats"."id" FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL ORDER BY "chats"."total_tokens" DESC LIMIT 10 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[35mSQL (0.2ms)[0m  [1m[34mSELECT "chats"."id" AS t0_r0, "chats"."title" AS t0_r1, "chats"."created_at" AS t0_r2, "chats"."updated_at" AS t0_r3, "chats"."total_input_tokens" AS t0_r4, "chats"."total_output_tokens" AS t0_r5, "chats"."total_tokens" AS t0_r6, "chats"."model_used" AS t0_r7, "messages"."id" AS t1_r0, "messages"."chat_id" AS t1_r1, "messages"."content" AS t1_r2, "messages"."role" AS t1_r3, "messages"."created_at" AS t1_r4, "messages"."updated_at" AS t1_r5, "messages"."input_tokens" AS t1_r6, "messages"."output_tokens" AS t1_r7, "messages"."total_tokens" AS t1_r8 FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL AND "chats"."id" IN (31, 30, 29, 32) ORDER BY "chats"."total_tokens" DESC /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
Completed 406 Not Acceptable in 36ms (ActiveRecord: 0.5ms (6 queries, 0 cached) | GC: 0.4ms)


  
ActionController::MissingExactTemplate (UsageController#top_chats is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage" for 127.0.0.1 at 2025-09-08 19:55:46 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.4ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.9ms | GC: 0.3ms)
Completed 200 OK in 40ms (Views: 1.0ms | ActiveRecord: 1.0ms (22 queries, 6 cached) | GC: 10.5ms)


Started GET "/usage/daily" for 127.0.0.1 at 2025-09-08 19:55:47 +0530
Processing by UsageController#daily as HTML
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.2ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
Completed 406 Not Acceptable in 24ms (ActiveRecord: 0.2ms (7 queries, 2 cached) | GC: 0.2ms)


  
ActionController::MissingExactTemplate (UsageController#daily is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage" for 127.0.0.1 at 2025-09-08 19:55:48 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.1ms | GC: 0.3ms)
Completed 200 OK in 40ms (Views: 1.2ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 1.6ms)


Started GET "/usage/monthly" for 127.0.0.1 at 2025-09-08 19:55:49 +0530
Processing by UsageController#monthly as HTML
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
Completed 406 Not Acceptable in 34ms (ActiveRecord: 0.3ms (7 queries, 2 cached) | GC: 0.0ms)


  
ActionController::MissingExactTemplate (UsageController#monthly is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage" for 127.0.0.1 at 2025-09-08 19:55:51 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 1.4ms | GC: 1.2ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 1.2ms)
Completed 200 OK in 57ms (Views: 2.2ms | ActiveRecord: 0.7ms (22 queries, 6 cached) | GC: 19.2ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 19:55:51 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 19.8ms | GC: 2.2ms)
  Rendered layout layouts/application.html.erb (Duration: 20.2ms | GC: 2.2ms)
Completed 200 OK in 51ms (Views: 19.3ms | ActiveRecord: 1.2ms (38 queries, 18 cached) | GC: 2.2ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 19:55:57 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Chat 9/8/2025, 7:55:57 PM"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at", "total_input_tokens", "total_output_tokens", "total_tokens", "model_used") VALUES ('Chat 9/8/2025, 7:55:57 PM', '2025-09-08 14:25:57.247005', '2025-09-08 14:25:57.247005', NULL, NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 31ms (Views: 0.1ms | ActiveRecord: 1.0ms (1 query, 0 cached) | GC: 2.1ms)


Started GET "/chats/33" for 127.0.0.1 at 2025-09-08 19:55:57 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"33"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 33 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 33 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 22ms (Views: 1.8ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.6ms)


Started POST "/chats/33/messages" for 127.0.0.1 at 2025-09-08 19:56:02 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hello friends"}, "chat_id"=>"33"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 33 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:43:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (33, 'Hello friends', 'user', '2025-09-08 14:26:02.916421', '2025-09-08 14:26:02.916421', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 2, "output_tokens" = 0, "total_tokens" = 2 WHERE "messages"."id" = 75 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 0, "total_tokens" = 2 WHERE "chats"."id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
Failed to generate AI response for chat 33: undefined method `total_token_limit_for_model' for class TokenCountingService
/Users/alphaknight/Desktop/littlebird_bot/app/models/chat.rb:26:in `total_available_tokens_for_history'
/Users/alphaknight/Desktop/littlebird_bot/app/services/openai_service.rb:73:in `check_token_limits'
/Users/alphaknight/Desktop/littlebird_bot/app/controllers/messages_controller.rb:55:in `generate_ai_response'
/Users/alphaknight/Desktop/littlebird_bot/app/controllers/messages_controller.rb:8:in `create'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/basic_implicit_render.rb:8:in `send_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/base.rb:226:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/rendering.rb:193:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/callbacks.rb:261:in `block in process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.16/lib/turbo-rails.rb:24:in `with_request_id'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.16/app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actiontext-8.0.2.1/lib/action_text/rendering.rb:25:in `with_renderer'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actiontext-8.0.2.1/lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/callbacks.rb:260:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/rescue.rb:27:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications.rb:210:in `instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/instrumentation.rb:75:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activerecord-8.0.2.1/lib/active_record/railties/controller_runtime.rb:39:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/base.rb:163:in `process'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionview-8.0.2.1/lib/action_view/rendering.rb:40:in `process'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal.rb:252:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal.rb:335:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:50:in `serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:53:in `block in serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:126:in `each'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:126:in `find_routes'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:34:in `serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:908:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/engine/lazy_route_set.rb:68:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/tempfile_reaper.rb:20:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/etag.rb:29:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/conditional_get.rb:44:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/head.rb:15:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/http/permissions_policy.rb:38:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/http/content_security_policy.rb:38:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-session-2.1.1/lib/rack/session/abstract/id.rb:274:in `context'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-session-2.1.1/lib/rack/session/abstract/id.rb:268:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/cookies.rb:706:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activerecord-8.0.2.1/lib/active_record/migration.rb:671:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:100:in `run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/callbacks.rb:30:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/executor.rb:16:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:132:in `call_app'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:28:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:17:in `catch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:17:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/rack/logger.rb:41:in `call_app'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/rack/logger.rb:29:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/request_id.rb:34:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/method_override.rb:28:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/runtime.rb:24:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:60:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/executor.rb:16:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/static.rb:27:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/sendfile.rb:114:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/engine.rb:535:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/configuration.rb:297:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/request.rb:101:in `block in handle_request'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/thread_pool.rb:336:in `with_force_shutdown'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/request.rb:100:in `handle_request'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/server.rb:497:in `process_client'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/server.rb:266:in `block in run'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/thread_pool.rb:172:in `block in spawn_thread'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:25:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (33, 'I''m sorry, I''m having trouble processing your request right now. Please try again later.', 'assistant', '2025-09-08 14:26:02.919653', '2025-09-08 14:26:02.919653', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:25:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 19, "total_tokens" = 19 WHERE "messages"."id" = 76 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 19, "total_tokens" = 21 WHERE "chats"."id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:25:in `create'
Completed 201 Created in 30ms (Views: 0.1ms | ActiveRecord: 1.3ms (11 queries, 0 cached) | GC: 0.1ms)


Started POST "/chats/33/messages" for 127.0.0.1 at 2025-09-08 19:57:41 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"33"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 33 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:43:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (33, 'Hi', 'user', '2025-09-08 14:27:41.140020', '2025-09-08 14:27:41.140020', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 77 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 3, "total_output_tokens" = 19, "total_tokens" = 22 WHERE "chats"."id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:34:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:81:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:34:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33[0m
  â†³ app/services/openai_service.rb:112:in `prepare_messages_for_api'
Chat 33: Sending 35 input tokens to gpt-4o
Chat 33: API returned usage - input: 35, output: 9, total: 44
  [1m[36mChat Update (0.4ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4o' WHERE "chats"."id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:45:in `generate_response'
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 AND "messages"."role" = 'assistant' ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:72:in `generate_ai_response'
  [1m[36mMessage Update (0.3ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 9, "total_tokens" = 9 WHERE "messages"."id" = 76 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:74:in `generate_ai_response'
  [1m[36mMessage Sum (0.2ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 AND "messages"."id" != 77 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:118:in `calculate_history_tokens'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 AND "messages"."id" != 77[0m
  â†³ app/controllers/messages_controller.rb:118:in `calculate_history_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 24, "output_tokens" = 0, "total_tokens" = 24 WHERE "messages"."id" = 77 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:83:in `generate_ai_response'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 26, "total_output_tokens" = 9, "total_tokens" = 35 WHERE "chats"."id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
Chat 33 estimated cost: $0.000265 (input: $0.00013, output: $0.000135)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:11:in `create'
  [1m[36mMessage Create (0.9ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (33, 'Hello! How can I assist you today?', 'assistant', '2025-09-08 14:27:42.549443', '2025-09-08 14:27:42.549443', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:11:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 9, "total_tokens" = 9 WHERE "messages"."id" = 78 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 26, "total_output_tokens" = 18, "total_tokens" = 44 WHERE "chats"."id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:11:in `create'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:17:in `create'
Completed 201 Created in 1438ms (Views: 0.2ms | ActiveRecord: 3.9ms (25 queries, 3 cached) | GC: 8.5ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 19:57:44 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.8ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.4ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.6ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 38.5ms | GC: 20.8ms)
  Rendered layout layouts/application.html.erb (Duration: 39.7ms | GC: 21.0ms)
Completed 200 OK in 71ms (Views: 37.6ms | ActiveRecord: 3.0ms (42 queries, 20 cached) | GC: 21.3ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 19:57:47 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 1.3ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 0.3ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 19:57:48 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 17.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 18.0ms | GC: 0.0ms)
Completed 200 OK in 47ms (Views: 17.4ms | ActiveRecord: 0.8ms (42 queries, 20 cached) | GC: 0.0ms)


Started GET "/chats/32" for 127.0.0.1 at 2025-09-08 19:57:50 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"32"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 32 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 32 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 2.9ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 19:57:52 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 21.2ms | GC: 4.2ms)
  Rendered layout layouts/application.html.erb (Duration: 21.5ms | GC: 4.2ms)
Completed 200 OK in 50ms (Views: 20.9ms | ActiveRecord: 0.8ms (42 queries, 20 cached) | GC: 4.2ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 19:57:54 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Hi"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.6ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at", "total_input_tokens", "total_output_tokens", "total_tokens", "model_used") VALUES ('Hi', '2025-09-08 14:27:54.715362', '2025-09-08 14:27:54.715362', NULL, NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 33ms (Views: 0.1ms | ActiveRecord: 0.7ms (1 query, 0 cached) | GC: 0.0ms)


Started GET "/chats/34" for 127.0.0.1 at 2025-09-08 19:57:54 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"34"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 34 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 34 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 21ms (Views: 1.4ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 19:57:56 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 20.7ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 21.1ms | GC: 0.8ms)
Completed 200 OK in 53ms (Views: 20.2ms | ActiveRecord: 1.1ms (44 queries, 20 cached) | GC: 1.3ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 19:58:00 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 40ms (Views: 0.7ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 20:22:44 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (1.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.3ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 21.4ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 22.4ms | GC: 0.6ms)
Completed 200 OK in 59ms (Views: 21.2ms | ActiveRecord: 1.9ms (44 queries, 20 cached) | GC: 0.8ms)


Started GET "/chats/34" for 127.0.0.1 at 2025-09-08 20:22:46 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"34"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 34 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 34 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.0ms | GC: 0.0ms)
Completed 200 OK in 26ms (Views: 2.1ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/chats/34/messages" for 127.0.0.1 at 2025-09-08 20:22:49 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hello"}, "chat_id"=>"34"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 34 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:56:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (34, 'Hello', 'user', '2025-09-08 14:52:49.839846', '2025-09-08 14:52:49.839846', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 79 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 1, "total_output_tokens" = 0, "total_tokens" = 1 WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:35:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:78:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:35:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34[0m
  â†³ app/services/openai_service.rb:109:in `prepare_messages_for_api'
Chat 34: Sending 9 input tokens to gpt-4o-mini
OpenAI service error for chat 34: uninitialized constant OpenaiService::RESPONSE_TOKEN_BUFFER
/Users/alphaknight/Desktop/littlebird_bot/app/services/openai_service.rb:119:in `calculate_max_tokens'
/Users/alphaknight/Desktop/littlebird_bot/app/services/openai_service.rb:29:in `generate_response'
/Users/alphaknight/Desktop/littlebird_bot/app/controllers/messages_controller.rb:75:in `generate_ai_response'
/Users/alphaknight/Desktop/littlebird_bot/app/controllers/messages_controller.rb:8:in `create'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/basic_implicit_render.rb:8:in `send_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/base.rb:226:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/rendering.rb:193:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/callbacks.rb:261:in `block in process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.16/lib/turbo-rails.rb:24:in `with_request_id'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.16/app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actiontext-8.0.2.1/lib/action_text/rendering.rb:25:in `with_renderer'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actiontext-8.0.2.1/lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/callbacks.rb:260:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/rescue.rb:27:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications.rb:210:in `instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/instrumentation.rb:75:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activerecord-8.0.2.1/lib/active_record/railties/controller_runtime.rb:39:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/base.rb:163:in `process'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionview-8.0.2.1/lib/action_view/rendering.rb:40:in `process'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal.rb:252:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal.rb:335:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:50:in `serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:53:in `block in serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:126:in `each'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:126:in `find_routes'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:34:in `serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:908:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/engine/lazy_route_set.rb:68:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/tempfile_reaper.rb:20:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/etag.rb:29:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/conditional_get.rb:44:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/head.rb:15:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/http/permissions_policy.rb:38:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/http/content_security_policy.rb:38:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-session-2.1.1/lib/rack/session/abstract/id.rb:274:in `context'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-session-2.1.1/lib/rack/session/abstract/id.rb:268:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/cookies.rb:706:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activerecord-8.0.2.1/lib/active_record/migration.rb:671:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:100:in `run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/callbacks.rb:30:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/executor.rb:16:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:132:in `call_app'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:28:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:17:in `catch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:17:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/rack/logger.rb:41:in `call_app'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/rack/logger.rb:29:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/request_id.rb:34:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/method_override.rb:28:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/runtime.rb:24:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:60:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/executor.rb:16:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/static.rb:27:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/sendfile.rb:114:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/engine.rb:535:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/configuration.rb:297:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/request.rb:101:in `block in handle_request'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/thread_pool.rb:336:in `with_force_shutdown'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/request.rb:100:in `handle_request'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/server.rb:497:in `process_client'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/server.rb:266:in `block in run'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/thread_pool.rb:172:in `block in spawn_thread'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (34, 'I''m sorry, I''m having trouble processing your request right now. Please try again later.', 'assistant', '2025-09-08 14:52:49.850179', '2025-09-08 14:52:49.850179', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 19, "total_tokens" = 19 WHERE "messages"."id" = 80 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 1, "total_output_tokens" = 19, "total_tokens" = 20 WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:30:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:131:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:133:in `update_chat_title'
  [1m[36mChat Update (0.4ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Hello', "updated_at" = '2025-09-08 14:52:49.854046' WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:133:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:133:in `update_chat_title'
Completed 201 Created in 48ms (Views: 0.1ms | ActiveRecord: 2.1ms (18 queries, 2 cached) | GC: 2.9ms)


Started POST "/chats/34/messages" for 127.0.0.1 at 2025-09-08 20:24:05 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"34"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 34 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:56:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (34, 'Hi', 'user', '2025-09-08 14:54:05.792253', '2025-09-08 14:54:05.792253', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 81 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 19, "total_tokens" = 21 WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:35:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:78:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:35:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34[0m
  â†³ app/services/openai_service.rb:109:in `prepare_messages_for_api'
Chat 34: Sending 37 input tokens to gpt-4o-mini
OpenAI service error for chat 34: undefined method `response_token_buffer' for class ApplicationConfig
/Users/alphaknight/Desktop/littlebird_bot/app/services/openai_service.rb:119:in `calculate_max_tokens'
/Users/alphaknight/Desktop/littlebird_bot/app/services/openai_service.rb:29:in `generate_response'
/Users/alphaknight/Desktop/littlebird_bot/app/controllers/messages_controller.rb:75:in `generate_ai_response'
/Users/alphaknight/Desktop/littlebird_bot/app/controllers/messages_controller.rb:8:in `create'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/basic_implicit_render.rb:8:in `send_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/base.rb:226:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/rendering.rb:193:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/callbacks.rb:261:in `block in process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.16/lib/turbo-rails.rb:24:in `with_request_id'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.16/app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actiontext-8.0.2.1/lib/action_text/rendering.rb:25:in `with_renderer'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actiontext-8.0.2.1/lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/callbacks.rb:260:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/rescue.rb:27:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications.rb:210:in `instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/instrumentation.rb:75:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activerecord-8.0.2.1/lib/active_record/railties/controller_runtime.rb:39:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/base.rb:163:in `process'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionview-8.0.2.1/lib/action_view/rendering.rb:40:in `process'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal.rb:252:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal.rb:335:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:50:in `serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:53:in `block in serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:126:in `each'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:126:in `find_routes'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:34:in `serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:908:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/engine/lazy_route_set.rb:68:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/tempfile_reaper.rb:20:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/etag.rb:29:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/conditional_get.rb:44:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/head.rb:15:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/http/permissions_policy.rb:38:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/http/content_security_policy.rb:38:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-session-2.1.1/lib/rack/session/abstract/id.rb:274:in `context'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-session-2.1.1/lib/rack/session/abstract/id.rb:268:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/cookies.rb:706:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activerecord-8.0.2.1/lib/active_record/migration.rb:671:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:100:in `run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/callbacks.rb:30:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/executor.rb:16:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:132:in `call_app'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:28:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:17:in `catch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:17:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/rack/logger.rb:41:in `call_app'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/rack/logger.rb:29:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/request_id.rb:34:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/method_override.rb:28:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/runtime.rb:24:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:60:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/executor.rb:16:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/static.rb:27:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/sendfile.rb:114:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/engine.rb:535:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/configuration.rb:297:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/request.rb:101:in `block in handle_request'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/thread_pool.rb:336:in `with_force_shutdown'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/request.rb:100:in `handle_request'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/server.rb:497:in `process_client'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/server.rb:266:in `block in run'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/thread_pool.rb:172:in `block in spawn_thread'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (34, 'I''m sorry, I''m having trouble processing your request right now. Please try again later.', 'assistant', '2025-09-08 14:54:05.797924', '2025-09-08 14:54:05.797924', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 19, "total_tokens" = 19 WHERE "messages"."id" = 82 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 38, "total_tokens" = 40 WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:30:in `create'
Completed 201 Created in 32ms (Views: 0.1ms | ActiveRecord: 2.1ms (16 queries, 2 cached) | GC: 0.5ms)


Started POST "/chats/34/messages" for 127.0.0.1 at 2025-09-08 20:25:24 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"34"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 34 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:56:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (34, 'Hi', 'user', '2025-09-08 14:55:24.389357', '2025-09-08 14:55:24.389357', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 83 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 3, "total_output_tokens" = 38, "total_tokens" = 41 WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:35:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:78:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:35:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34[0m
  â†³ app/services/openai_service.rb:109:in `prepare_messages_for_api'
Chat 34: Sending 65 input tokens to gpt-4o-mini
OpenAI service error for chat 34: uninitialized constant OpenaiService::DEFAULT_MAX_TOKENS
/Users/alphaknight/Desktop/littlebird_bot/app/services/openai_service.rb:121:in `calculate_max_tokens'
/Users/alphaknight/Desktop/littlebird_bot/app/services/openai_service.rb:29:in `generate_response'
/Users/alphaknight/Desktop/littlebird_bot/app/controllers/messages_controller.rb:75:in `generate_ai_response'
/Users/alphaknight/Desktop/littlebird_bot/app/controllers/messages_controller.rb:8:in `create'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/basic_implicit_render.rb:8:in `send_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/base.rb:226:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/rendering.rb:193:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/callbacks.rb:261:in `block in process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:120:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.16/lib/turbo-rails.rb:24:in `with_request_id'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/turbo-rails-2.0.16/app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actiontext-8.0.2.1/lib/action_text/rendering.rb:25:in `with_renderer'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actiontext-8.0.2.1/lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `instance_exec'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:129:in `block in run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:140:in `run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/callbacks.rb:260:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/rescue.rb:27:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications.rb:210:in `block in instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications/instrumenter.rb:58:in `instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/notifications.rb:210:in `instrument'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/instrumentation.rb:75:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activerecord-8.0.2.1/lib/active_record/railties/controller_runtime.rb:39:in `process_action'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/abstract_controller/base.rb:163:in `process'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionview-8.0.2.1/lib/action_view/rendering.rb:40:in `process'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal.rb:252:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_controller/metal.rb:335:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:50:in `serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:53:in `block in serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:126:in `each'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:126:in `find_routes'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/journey/router.rb:34:in `serve'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/routing/route_set.rb:908:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/engine/lazy_route_set.rb:68:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/tempfile_reaper.rb:20:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/etag.rb:29:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/conditional_get.rb:44:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/head.rb:15:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/http/permissions_policy.rb:38:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/http/content_security_policy.rb:38:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-session-2.1.1/lib/rack/session/abstract/id.rb:274:in `context'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-session-2.1.1/lib/rack/session/abstract/id.rb:268:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/cookies.rb:706:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activerecord-8.0.2.1/lib/active_record/migration.rb:671:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/activesupport-8.0.2.1/lib/active_support/callbacks.rb:100:in `run_callbacks'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/callbacks.rb:30:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/executor.rb:16:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:132:in `call_app'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:28:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:17:in `catch'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/web-console-4.2.1/lib/web_console/middleware.rb:17:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/rack/logger.rb:41:in `call_app'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/rack/logger.rb:29:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/request_id.rb:34:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/method_override.rb:28:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/runtime.rb:24:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/server_timing.rb:60:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/executor.rb:16:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/static.rb:27:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/rack-3.2.1/lib/rack/sendfile.rb:114:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/actionpack-8.0.2.1/lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/railties-8.0.2.1/lib/rails/engine.rb:535:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/configuration.rb:297:in `call'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/request.rb:101:in `block in handle_request'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/thread_pool.rb:336:in `with_force_shutdown'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/request.rb:100:in `handle_request'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/server.rb:497:in `process_client'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/server.rb:266:in `block in run'
/Users/alphaknight/.rbenv/versions/3.3.9/lib/ruby/gems/3.3.0/gems/puma-7.0.1/lib/puma/thread_pool.rb:172:in `block in spawn_thread'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (34, 'I''m sorry, I''m having trouble processing your request right now. Please try again later.', 'assistant', '2025-09-08 14:55:24.394580', '2025-09-08 14:55:24.394580', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 19, "total_tokens" = 19 WHERE "messages"."id" = 84 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 3, "total_output_tokens" = 57, "total_tokens" = 60 WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:30:in `create'
Completed 201 Created in 31ms (Views: 0.1ms | ActiveRecord: 2.1ms (16 queries, 2 cached) | GC: 1.2ms)


Started POST "/chats/34/messages" for 127.0.0.1 at 2025-09-08 20:26:46 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"34"}
  [1m[36mChat Load (0.0ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 34 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:56:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.4ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (34, 'Hi', 'user', '2025-09-08 14:56:46.115817', '2025-09-08 14:56:46.115817', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 85 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 4, "total_output_tokens" = 57, "total_tokens" = 61 WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:35:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:78:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:35:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34[0m
  â†³ app/services/openai_service.rb:109:in `prepare_messages_for_api'
Chat 34: Sending 93 input tokens to gpt-4o-mini
Chat 34: API returned usage - input: 86, output: 9, total: 95
  [1m[36mChat Update (0.5ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4o-mini' WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:42:in `generate_response'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Create (1.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (34, 'Hello! How can I assist you today?', 'assistant', '2025-09-08 14:56:52.894786', '2025-09-08 14:56:52.894786', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.2ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 9, "total_tokens" = 9 WHERE "messages"."id" = 86 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 4, "total_output_tokens" = 66, "total_tokens" = 70 WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 85 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:105:in `update_message_tokens'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 9, "total_tokens" = 9 WHERE "messages"."id" = 86 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:112:in `update_message_tokens'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 4, "total_output_tokens" = 66, "total_tokens" = 70 WHERE "chats"."id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
Chat 34 token usage - User: 1, Assistant: 9, API Input: 86, API Output: 9
Chat 34 estimated cost: $4.0e-05 (input: $1.0e-06, output: $4.0e-05)
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:30:in `create'
Completed 201 Created in 6822ms (Views: 0.2ms | ActiveRecord: 4.2ms (22 queries, 2 cached) | GC: 8.5ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 20:27:13 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 21.6ms | GC: 2.0ms)
  Rendered layout layouts/application.html.erb (Duration: 22.7ms | GC: 2.0ms)
Completed 200 OK in 53ms (Views: 22.8ms | ActiveRecord: 1.0ms (46 queries, 22 cached) | GC: 2.0ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 20:27:20 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Bueno"}}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at", "total_input_tokens", "total_output_tokens", "total_tokens", "model_used") VALUES ('Bueno', '2025-09-08 14:57:20.168767', '2025-09-08 14:57:20.168767', NULL, NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 32ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 0.1ms)


Started GET "/chats/35" for 127.0.0.1 at 2025-09-08 20:27:20 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"35"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 35 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 35 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 19ms (Views: 1.6ms | ActiveRecord: 0.1ms (3 queries, 0 cached) | GC: 0.0ms)


Started POST "/chats/35/messages" for 127.0.0.1 at 2025-09-08 20:27:23 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hello"}, "chat_id"=>"35"}
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 35 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:56:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (35, 'Hello', 'user', '2025-09-08 14:57:23.439182', '2025-09-08 14:57:23.439182', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 87 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 1, "total_output_tokens" = 0, "total_tokens" = 1 WHERE "chats"."id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:35:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:78:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:35:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35[0m
  â†³ app/services/openai_service.rb:109:in `prepare_messages_for_api'
Chat 35: Sending 9 input tokens to gpt-4o-mini
Chat 35: API returned usage - input: 8, output: 9, total: 17
  [1m[36mChat Update (0.3ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4o-mini' WHERE "chats"."id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:42:in `generate_response'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Create (1.6ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (35, 'Hello! How can I assist you today?', 'assistant', '2025-09-08 14:57:24.534069', '2025-09-08 14:57:24.534069', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 9, "total_tokens" = 9 WHERE "messages"."id" = 88 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 1, "total_output_tokens" = 9, "total_tokens" = 10 WHERE "chats"."id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 87 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:105:in `update_message_tokens'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 9, "total_tokens" = 9 WHERE "messages"."id" = 88 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:112:in `update_message_tokens'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:15:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 1, "total_output_tokens" = 9, "total_tokens" = 10 WHERE "chats"."id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:18:in `update_token_totals'
Chat 35 token usage - User: 1, Assistant: 9, API Input: 8, API Output: 9
Chat 35 estimated cost: $6.0e-06 (input: $0.0, output: $5.0e-06)
  [1m[36mMessage Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:30:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:131:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:133:in `update_chat_title'
  [1m[36mChat Update (0.9ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Hello', "updated_at" = '2025-09-08 14:57:24.548848' WHERE "chats"."id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:133:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:133:in `update_chat_title'
Completed 201 Created in 1145ms (Views: 0.1ms | ActiveRecord: 5.1ms (24 queries, 2 cached) | GC: 0.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 20:27:24 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 27.0ms | GC: 6.2ms)
  Rendered layout layouts/application.html.erb (Duration: 27.4ms | GC: 6.2ms)
Completed 200 OK in 60ms (Views: 26.6ms | ActiveRecord: 1.0ms (50 queries, 24 cached) | GC: 6.2ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:27:28 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.9ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 1.2ms | ActiveRecord: 0.5ms (22 queries, 6 cached) | GC: 0.5ms)


Started GET "/chats/35" for 127.0.0.1 at 2025-09-08 20:27:29 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"35"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 35 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 35 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 2.3ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 20:27:31 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 24.8ms | GC: 3.8ms)
  Rendered layout layouts/application.html.erb (Duration: 25.2ms | GC: 3.8ms)
Completed 200 OK in 56ms (Views: 24.3ms | ActiveRecord: 1.1ms (50 queries, 24 cached) | GC: 3.8ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:27:32 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 0.8ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 0.3ms)


Started GET "/usage/monthly" for 127.0.0.1 at 2025-09-08 20:27:36 +0530
Processing by UsageController#monthly as HTML
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
Completed 406 Not Acceptable in 33ms (ActiveRecord: 0.3ms (7 queries, 2 cached) | GC: 0.0ms)


  
ActionController::MissingExactTemplate (UsageController#monthly is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage/top_chats" for 127.0.0.1 at 2025-09-08 20:27:36 +0530
Processing by UsageController#top_chats as HTML
  [1m[35mSQL (0.1ms)[0m  [1m[34mSELECT DISTINCT "chats"."id" FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL ORDER BY "chats"."total_tokens" DESC LIMIT 10 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[35mSQL (0.2ms)[0m  [1m[34mSELECT "chats"."id" AS t0_r0, "chats"."title" AS t0_r1, "chats"."created_at" AS t0_r2, "chats"."updated_at" AS t0_r3, "chats"."total_input_tokens" AS t0_r4, "chats"."total_output_tokens" AS t0_r5, "chats"."total_tokens" AS t0_r6, "chats"."model_used" AS t0_r7, "messages"."id" AS t1_r0, "messages"."chat_id" AS t1_r1, "messages"."content" AS t1_r2, "messages"."role" AS t1_r3, "messages"."created_at" AS t1_r4, "messages"."updated_at" AS t1_r5, "messages"."input_tokens" AS t1_r6, "messages"."output_tokens" AS t1_r7, "messages"."total_tokens" AS t1_r8 FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL AND "chats"."id" IN (31, 30, 29, 34, 33, 32, 35) ORDER BY "chats"."total_tokens" DESC /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
Completed 406 Not Acceptable in 30ms (ActiveRecord: 0.4ms (9 queries, 0 cached) | GC: 0.0ms)


  
ActionController::MissingExactTemplate (UsageController#top_chats is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:27:38 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.7ms | GC: 0.0ms)
Completed 200 OK in 37ms (Views: 0.8ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 20:27:39 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:11:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 20.4ms | GC: 1.5ms)
  Rendered layout layouts/application.html.erb (Duration: 20.7ms | GC: 1.5ms)
Completed 200 OK in 46ms (Views: 20.0ms | ActiveRecord: 0.9ms (50 queries, 24 cached) | GC: 1.5ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:48:23 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 2.3ms | ActiveRecord: 1.5ms (22 queries, 6 cached) | GC: 1.1ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 20:48:24 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 25.6ms | GC: 3.1ms)
  Rendered layout layouts/application.html.erb (Duration: 26.0ms | GC: 3.1ms)
Completed 200 OK in 54ms (Views: 25.3ms | ActiveRecord: 1.1ms (50 queries, 24 cached) | GC: 3.1ms)


Started GET "/chats/35" for 127.0.0.1 at 2025-09-08 20:48:26 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"35"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 35 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 35 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 2.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.1ms)
Completed 200 OK in 34ms (Views: 2.9ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.1ms)


Started POST "/chats/35/messages" for 127.0.0.1 at 2025-09-08 20:48:28 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Hi"}, "chat_id"=>"35"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 35 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:56:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (35, 'Hi', 'user', '2025-09-08 15:18:28.316333', '2025-09-08 15:18:28.316333', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 89 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:13:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:14:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 9, "total_tokens" = 11 WHERE "chats"."id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:33:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:77:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:33:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35[0m
  â†³ app/services/openai_service.rb:104:in `prepare_messages_for_api'
Chat 35: Sending 29 input tokens to gpt-4o-mini
Chat 35: API returned usage - input: 26, output: 8, total: 34
  [1m[36mChat Update (0.3ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4o-mini' WHERE "chats"."id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:41:in `generate_response'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Create (1.8ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (35, 'Hi there! How are you doing?', 'assistant', '2025-09-08 15:18:32.050495', '2025-09-08 15:18:32.050495', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 8, "total_tokens" = 8 WHERE "messages"."id" = 90 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:13:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:14:in `update_token_totals'
  [1m[36mChat Update (0.1ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 17, "total_tokens" = 19 WHERE "chats"."id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 1, "output_tokens" = 0, "total_tokens" = 1 WHERE "messages"."id" = 89 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:102:in `update_message_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 8, "total_tokens" = 8 WHERE "messages"."id" = 90 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:108:in `update_message_tokens'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:13:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:14:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 17, "total_tokens" = 19 WHERE "chats"."id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
Chat 35 token usage - User: 1, Assistant: 8, API Input: 26, API Output: 8
Chat 35 estimated cost: $1.1e-05 (input: $0.0, output: $1.0e-05)
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:30:in `create'
Completed 201 Created in 3779ms (Views: 0.2ms | ActiveRecord: 4.3ms (22 queries, 2 cached) | GC: 1.3ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 20:48:33 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 24.2ms | GC: 4.4ms)
  Rendered layout layouts/application.html.erb (Duration: 24.6ms | GC: 4.4ms)
Completed 200 OK in 56ms (Views: 23.7ms | ActiveRecord: 1.1ms (50 queries, 24 cached) | GC: 4.4ms)


Started GET "/chats/35" for 127.0.0.1 at 2025-09-08 20:48:36 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"35"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 35 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 35 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.0ms)
Completed 200 OK in 30ms (Views: 2.4ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 20:48:38 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 23.7ms | GC: 3.2ms)
  Rendered layout layouts/application.html.erb (Duration: 24.1ms | GC: 3.2ms)
Completed 200 OK in 55ms (Views: 23.3ms | ActiveRecord: 1.0ms (50 queries, 24 cached) | GC: 3.2ms)


Started POST "/chats" for 127.0.0.1 at 2025-09-08 20:48:40 +0530
Processing by ChatsController#create as */*
  Parameters: {"chat"=>{"title"=>"Chat 9/8/2025, 8:48:40 PM"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mChat Create (0.7ms)[0m  [1m[32mINSERT INTO "chats" ("title", "created_at", "updated_at", "total_input_tokens", "total_output_tokens", "total_tokens", "model_used") VALUES ('Chat 9/8/2025, 8:48:40 PM', '2025-09-08 15:18:40.483616', '2025-09-08 15:18:40.483616', NULL, NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:41:in `create'
Completed 201 Created in 33ms (Views: 0.1ms | ActiveRecord: 0.8ms (1 query, 0 cached) | GC: 1.0ms)


Started GET "/chats/36" for 127.0.0.1 at 2025-09-08 20:48:40 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"36"}
  [1m[36mChat Load (0.2ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 36 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 36 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.3ms | GC: 0.0ms)
Completed 200 OK in 21ms (Views: 1.4ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.2ms)


Started POST "/chats/36/messages" for 127.0.0.1 at 2025-09-08 20:48:44 +0530
Processing by MessagesController#create as */*
  Parameters: {"message"=>{"content"=>"Whatsup"}, "chat_id"=>"36"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 36 LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:56:in `find_chat'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Create (0.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (36, 'Whatsup', 'user', '2025-09-08 15:18:44.104380', '2025-09-08 15:18:44.104380', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Update (0.0ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 2, "output_tokens" = 0, "total_tokens" = 2 WHERE "messages"."id" = 91 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:22:in `update_token_usage'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:13:in `update_token_totals'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:14:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 0, "total_tokens" = 2 WHERE "chats"."id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:7:in `create'
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" ASC /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:33:in `messages_within_token_limit'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:77:in `check_token_limits'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" ASC[0m
  â†³ app/models/chat.rb:33:in `messages_within_token_limit'
  [1m[36mCACHE Message Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 36[0m
  â†³ app/services/openai_service.rb:104:in `prepare_messages_for_api'
Chat 36: Sending 10 input tokens to gpt-4o-mini
Chat 36: API returned usage - input: 9, output: 24, total: 33
  [1m[36mChat Update (0.4ms)[0m  [1m[33mUPDATE "chats" SET "model_used" = 'gpt-4o-mini' WHERE "chats"."id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/services/openai_service.rb:41:in `generate_response'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Create (1.5ms)[0m  [1m[32mINSERT INTO "messages" ("chat_id", "content", "role", "created_at", "updated_at", "input_tokens", "output_tokens", "total_tokens") VALUES (36, 'Not much! Just here to help you with any questions or topics you want to discuss. Whatâ€™s on your mind?', 'assistant', '2025-09-08 15:18:45.381464', '2025-09-08 15:18:45.381464', NULL, NULL, NULL) RETURNING "id" /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 24, "total_tokens" = 24 WHERE "messages"."id" = 92 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/message.rb:28:in `update_token_usage'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:13:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:14:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 24, "total_tokens" = 26 WHERE "chats"."id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:19:in `create'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 2, "output_tokens" = 0, "total_tokens" = 2 WHERE "messages"."id" = 91 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:102:in `update_message_tokens'
  [1m[36mMessage Update (0.1ms)[0m  [1m[33mUPDATE "messages" SET "input_tokens" = 0, "output_tokens" = 24, "total_tokens" = 24 WHERE "messages"."id" = 92 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:108:in `update_message_tokens'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."chat_id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:13:in `update_token_totals'
  [1m[36mMessage Sum (0.1ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."chat_id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:14:in `update_token_totals'
  [1m[36mChat Update (0.0ms)[0m  [1m[33mUPDATE "chats" SET "total_input_tokens" = 2, "total_output_tokens" = 24, "total_tokens" = 26 WHERE "chats"."id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/models/chat.rb:16:in `update_token_totals'
Chat 36 token usage - User: 2, Assistant: 24, API Input: 9, API Output: 24
Chat 36 estimated cost: $1.5e-05 (input: $0.0, output: $1.4e-05)
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:30:in `create'
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 AND "messages"."role" = 'user' ORDER BY "messages"."id" ASC LIMIT 1 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:124:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN immediate TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:126:in `update_chat_title'
  [1m[36mChat Update (0.9ms)[0m  [1m[33mUPDATE "chats" SET "title" = 'Whatsup', "updated_at" = '2025-09-08 15:18:45.396749' WHERE "chats"."id" = 36 /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:126:in `update_chat_title'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT TRANSACTION /*action='create',application='LittlebirdBot',controller='messages'*/[0m
  â†³ app/controllers/messages_controller.rb:126:in `update_chat_title'
Completed 201 Created in 1326ms (Views: 0.2ms | ActiveRecord: 4.7ms (24 queries, 2 cached) | GC: 1.4ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 20:48:48 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 36 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 25.9ms | GC: 3.3ms)
  Rendered layout layouts/application.html.erb (Duration: 26.2ms | GC: 3.3ms)
Completed 200 OK in 57ms (Views: 25.3ms | ActiveRecord: 1.2ms (54 queries, 26 cached) | GC: 3.3ms)


Started GET "/chats/33" for 127.0.0.1 at 2025-09-08 20:48:56 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"33"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 33 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 33 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 29ms (Views: 2.3ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/chats/33" for 127.0.0.1 at 2025-09-08 20:48:58 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"33"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 33 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 33 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.5ms)
Completed 200 OK in 33ms (Views: 2.9ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.5ms)


Started GET "/chats" for 127.0.0.1 at 2025-09-08 20:49:01 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.2ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 36 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 23.6ms | GC: 2.7ms)
  Rendered layout layouts/application.html.erb (Duration: 23.9ms | GC: 2.7ms)
Completed 200 OK in 48ms (Views: 23.0ms | ActiveRecord: 1.1ms (54 queries, 26 cached) | GC: 2.7ms)


Started GET "/chats/36" for 127.0.0.1 at 2025-09-08 20:49:02 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"36"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 36 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 36 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 2.3ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.3ms)


Started GET "/chats/33" for 127.0.0.1 at 2025-09-08 20:49:08 +0530
Processing by ChatsController#show as HTML
  Parameters: {"id"=>"33"}
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" WHERE "chats"."id" = 33 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/controllers/chats_controller.rb:51:in `find_chat'
  Rendering layout layouts/application.html.erb
  Rendering chats/show.html.erb within layouts/application
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" ASC /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:13
  [1m[36mMessage Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "messages" WHERE "messages"."chat_id" = 33 LIMIT 1 /*action='show',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/show.html.erb:30
  Rendered chats/show.html.erb within layouts/application (Duration: 1.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 2.2ms | ActiveRecord: 0.2ms (3 queries, 0 cached) | GC: 0.1ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:49:40 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.1ms)
Completed 200 OK in 31ms (Views: 2.1ms | ActiveRecord: 1.2ms (22 queries, 6 cached) | GC: 1.2ms)


Started GET "/usage/top_chats" for 127.0.0.1 at 2025-09-08 20:49:41 +0530
Processing by UsageController#top_chats as HTML
  [1m[35mSQL (0.1ms)[0m  [1m[34mSELECT DISTINCT "chats"."id" FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL ORDER BY "chats"."total_tokens" DESC LIMIT 10 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[35mSQL (0.2ms)[0m  [1m[34mSELECT "chats"."id" AS t0_r0, "chats"."title" AS t0_r1, "chats"."created_at" AS t0_r2, "chats"."updated_at" AS t0_r3, "chats"."total_input_tokens" AS t0_r4, "chats"."total_output_tokens" AS t0_r5, "chats"."total_tokens" AS t0_r6, "chats"."model_used" AS t0_r7, "messages"."id" AS t1_r0, "messages"."chat_id" AS t1_r1, "messages"."content" AS t1_r2, "messages"."role" AS t1_r3, "messages"."created_at" AS t1_r4, "messages"."updated_at" AS t1_r5, "messages"."input_tokens" AS t1_r6, "messages"."output_tokens" AS t1_r7, "messages"."total_tokens" AS t1_r8 FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL AND "chats"."id" IN (31, 30, 29, 34, 33, 36, 32, 35) ORDER BY "chats"."total_tokens" DESC /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 36 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
Completed 406 Not Acceptable in 40ms (ActiveRecord: 0.5ms (10 queries, 0 cached) | GC: 0.6ms)


  
ActionController::MissingExactTemplate (UsageController#top_chats is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:49:45 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | GC: 0.0ms)
Completed 200 OK in 38ms (Views: 1.0ms | ActiveRecord: 1.0ms (22 queries, 6 cached) | GC: 1.3ms)


Started GET "/usage/top_chats" for 127.0.0.1 at 2025-09-08 20:50:50 +0530
Processing by UsageController#top_chats as HTML
  [1m[35mSQL (0.1ms)[0m  [1m[34mSELECT DISTINCT "chats"."id" FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL ORDER BY "chats"."total_tokens" DESC LIMIT 10 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[35mSQL (0.3ms)[0m  [1m[34mSELECT "chats"."id" AS t0_r0, "chats"."title" AS t0_r1, "chats"."created_at" AS t0_r2, "chats"."updated_at" AS t0_r3, "chats"."total_input_tokens" AS t0_r4, "chats"."total_output_tokens" AS t0_r5, "chats"."total_tokens" AS t0_r6, "chats"."model_used" AS t0_r7, "messages"."id" AS t1_r0, "messages"."chat_id" AS t1_r1, "messages"."content" AS t1_r2, "messages"."role" AS t1_r3, "messages"."created_at" AS t1_r4, "messages"."updated_at" AS t1_r5, "messages"."input_tokens" AS t1_r6, "messages"."output_tokens" AS t1_r7, "messages"."total_tokens" AS t1_r8 FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL AND "chats"."id" IN (31, 30, 29, 34, 33, 36, 32, 35) ORDER BY "chats"."total_tokens" DESC /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 36 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
Completed 406 Not Acceptable in 33ms (ActiveRecord: 0.9ms (10 queries, 0 cached) | GC: 0.7ms)


  
ActionController::MissingExactTemplate (UsageController#top_chats is missing a template for request formats: text/html):
  
actionpack (8.0.2.1) lib/action_controller/metal/implicit_render.rb:49:in `default_render'
actionpack (8.0.2.1) lib/action_controller/metal/basic_implicit_render.rb:9:in `send_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:226:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rendering.rb:193:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:261:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:120:in `block in run_callbacks'
turbo-rails (2.0.16) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.16) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
actiontext (8.0.2.1) lib/action_text/rendering.rb:25:in `with_renderer'
actiontext (8.0.2.1) lib/action_text/engine.rb:71:in `block (4 levels) in <class:Engine>'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `instance_exec'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:129:in `block in run_callbacks'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:140:in `run_callbacks'
actionpack (8.0.2.1) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:76:in `block in process_action'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (8.0.2.1) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (8.0.2.1) lib/active_support/notifications.rb:210:in `instrument'
actionpack (8.0.2.1) lib/action_controller/metal/instrumentation.rb:75:in `process_action'
actionpack (8.0.2.1) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (8.0.2.1) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (8.0.2.1) lib/abstract_controller/base.rb:163:in `process'
actionview (8.0.2.1) lib/action_view/rendering.rb:40:in `process'
actionpack (8.0.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (8.0.2.1) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (8.0.2.1) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (8.0.2.1) lib/action_dispatch/routing/route_set.rb:908:in `call'
railties (8.0.2.1) lib/rails/engine/lazy_route_set.rb:68:in `call'
rack (3.2.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.2.1) lib/rack/etag.rb:29:in `call'
rack (3.2.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.2.1) lib/rack/head.rb:15:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (8.0.2.1) lib/action_dispatch/http/content_security_policy.rb:38:in `call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/cookies.rb:706:in `call'
activerecord (8.0.2.1) lib/active_record/migration.rb:671:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (8.0.2.1) lib/active_support/callbacks.rb:100:in `run_callbacks'
actionpack (8.0.2.1) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (8.0.2.1) lib/rails/rack/logger.rb:41:in `call_app'
railties (8.0.2.1) lib/rails/rack/logger.rb:29:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/request_id.rb:34:in `call'
rack (3.2.1) lib/rack/method_override.rb:28:in `call'
rack (3.2.1) lib/rack/runtime.rb:24:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (8.0.2.1) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.2.1) lib/rack/sendfile.rb:114:in `call'
actionpack (8.0.2.1) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
railties (8.0.2.1) lib/rails/engine.rb:535:in `call'
puma (7.0.1) lib/puma/configuration.rb:297:in `call'
puma (7.0.1) lib/puma/request.rb:101:in `block in handle_request'
puma (7.0.1) lib/puma/thread_pool.rb:336:in `with_force_shutdown'
puma (7.0.1) lib/puma/request.rb:100:in `handle_request'
puma (7.0.1) lib/puma/server.rb:497:in `process_client'
puma (7.0.1) lib/puma/server.rb:266:in `block in run'
puma (7.0.1) lib/puma/thread_pool.rb:172:in `block in spawn_thread'
Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:52:22 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.4ms | GC: 0.0ms)
Completed 200 OK in 32ms (Views: 2.0ms | ActiveRecord: 1.0ms (22 queries, 6 cached) | GC: 0.0ms)


Started GET "/usage/top_chats" for 127.0.0.1 at 2025-09-08 20:53:51 +0530
Processing by UsageController#top_chats as HTML
  [1m[35mSQL (0.1ms)[0m  [1m[34mSELECT DISTINCT "chats"."id" FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL ORDER BY "chats"."total_tokens" DESC LIMIT 10 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[35mSQL (0.1ms)[0m  [1m[34mSELECT "chats"."id" AS t0_r0, "chats"."title" AS t0_r1, "chats"."created_at" AS t0_r2, "chats"."updated_at" AS t0_r3, "chats"."total_input_tokens" AS t0_r4, "chats"."total_output_tokens" AS t0_r5, "chats"."total_tokens" AS t0_r6, "chats"."model_used" AS t0_r7, "messages"."id" AS t1_r0, "messages"."chat_id" AS t1_r1, "messages"."content" AS t1_r2, "messages"."role" AS t1_r3, "messages"."created_at" AS t1_r4, "messages"."updated_at" AS t1_r5, "messages"."input_tokens" AS t1_r6, "messages"."output_tokens" AS t1_r7, "messages"."total_tokens" AS t1_r8 FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "chats"."total_tokens" IS NOT NULL AND "chats"."id" IN (31, 30, 29, 34, 33, 36, 32, 35) ORDER BY "chats"."total_tokens" DESC /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:93:in `map'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 36 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='top_chats',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:101:in `block in top_chats'
  Rendering layout layouts/application.html.erb
  Rendering usage/top_chats.html.erb within layouts/application
  Rendered usage/top_chats.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.8ms | GC: 0.0ms)
Completed 200 OK in 31ms (Views: 2.3ms | ActiveRecord: 1.0ms (10 queries, 0 cached) | GC: 1.7ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:53:54 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 1.1ms | ActiveRecord: 0.7ms (22 queries, 6 cached) | GC: 0.0ms)


Started GET "/usage/daily" for 127.0.0.1 at 2025-09-08 20:53:56 +0530
Processing by UsageController#daily as HTML
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='daily',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  Rendering layout layouts/application.html.erb
  Rendering usage/daily.html.erb within layouts/application
  Rendered usage/daily.html.erb within layouts/application (Duration: 2.9ms | GC: 2.1ms)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | GC: 2.1ms)
Completed 200 OK in 34ms (Views: 3.6ms | ActiveRecord: 0.3ms (7 queries, 2 cached) | GC: 2.1ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:53:57 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 0.6ms | ActiveRecord: 0.5ms (22 queries, 6 cached) | GC: 0.6ms)


Started GET "/usage/monthly" for 127.0.0.1 at 2025-09-08 20:53:58 +0530
Processing by UsageController#monthly as HTML
  [1m[36mMessage Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  Rendering layout layouts/application.html.erb
  Rendering usage/monthly.html.erb within layouts/application
  Rendered usage/monthly.html.erb within layouts/application (Duration: 1.2ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.3ms)
Completed 200 OK in 35ms (Views: 1.8ms | ActiveRecord: 0.4ms (7 queries, 2 cached) | GC: 0.3ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:53:58 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | GC: 0.2ms)
Completed 200 OK in 36ms (Views: 0.9ms | ActiveRecord: 0.6ms (22 queries, 6 cached) | GC: 0.3ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:53:59 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.5ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 0.6ms | ActiveRecord: 0.7ms (22 queries, 6 cached) | GC: 0.9ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 20:54:00 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 36 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 24.9ms | GC: 3.9ms)
  Rendered layout layouts/application.html.erb (Duration: 25.2ms | GC: 3.9ms)
Completed 200 OK in 54ms (Views: 24.6ms | ActiveRecord: 1.0ms (54 queries, 26 cached) | GC: 3.9ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:54:29 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.9ms | GC: 0.5ms)
Completed 200 OK in 32ms (Views: 2.4ms | ActiveRecord: 1.1ms (22 queries, 6 cached) | GC: 2.5ms)


Started GET "/usage/monthly" for 127.0.0.1 at 2025-09-08 20:54:30 +0530
Processing by UsageController#monthly as HTML
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  Rendering layout layouts/application.html.erb
  Rendering usage/monthly.html.erb within layouts/application
  Rendered usage/monthly.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.6ms | GC: 0.3ms)
Completed 200 OK in 34ms (Views: 1.8ms | ActiveRecord: 0.3ms (7 queries, 2 cached) | GC: 1.0ms)


Started GET "/usage/monthly" for 127.0.0.1 at 2025-09-08 20:54:30 +0530
Processing by UsageController#monthly as HTML
  [1m[36mMessage Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='monthly',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  Rendering layout layouts/application.html.erb
  Rendering usage/monthly.html.erb within layouts/application
  Rendered usage/monthly.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.8ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 0.9ms | ActiveRecord: 0.3ms (7 queries, 2 cached) | GC: 0.3ms)


Started GET "/usage" for 127.0.0.1 at 2025-09-08 20:54:32 +0530
Processing by UsageController#index as HTML
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:7:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:8:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:9:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:10:in `index'
  [1m[36mChat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:11:in `index'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:133:in `daily_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:134:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:135:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:136:in `daily_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:137:in `daily_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:180:in `calculate_daily_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-08 00:00:00' AND '2025-09-08 23:59:59.999999'[0m
  â†³ app/controllers/usage_controller.rb:181:in `calculate_daily_cost'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:152:in `monthly_usage_stats'
  [1m[36mChat Count (0.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "chats"."id") FROM "chats" INNER JOIN "messages" ON "messages"."chat_id" = "chats"."id" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:153:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."total_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:154:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:155:in `monthly_usage_stats'
  [1m[36mMessage Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30' /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:156:in `monthly_usage_stats'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."input_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:191:in `calculate_monthly_cost'
  [1m[36mCACHE Message Sum (0.0ms)[0m  [1m[34mSELECT SUM("messages"."output_tokens") FROM "messages" WHERE "messages"."created_at" BETWEEN '2025-09-01' AND '2025-09-30'[0m
  â†³ app/controllers/usage_controller.rb:192:in `calculate_monthly_cost'
  [1m[36mChat Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) AS "count_all", "chats"."model_used" AS "chats_model_used" FROM "chats" WHERE "chats"."model_used" IS NOT NULL GROUP BY "chats"."model_used" /*action='index',application='LittlebirdBot',controller='usage'*/[0m
  â†³ app/controllers/usage_controller.rb:164:in `model_usage_stats'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_input_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:168:in `calculate_total_costs'
  [1m[36mCACHE Chat Sum (0.0ms)[0m  [1m[34mSELECT SUM("chats"."total_output_tokens") FROM "chats"[0m
  â†³ app/controllers/usage_controller.rb:169:in `calculate_total_costs'
  Rendering layout layouts/application.html.erb
  Rendering usage/index.html.erb within layouts/application
  Rendered usage/index.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 0.6ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 0.8ms | ActiveRecord: 0.7ms (22 queries, 6 cached) | GC: 0.2ms)


Started GET "/" for 127.0.0.1 at 2025-09-08 20:54:33 +0530
Processing by ChatsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering chats/index.html.erb within layouts/application
  [1m[36mChat Load (0.1ms)[0m  [1m[34mSELECT "chats".* FROM "chats" ORDER BY "chats"."updated_at" DESC /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.1ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" IN (36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 3, 2) /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:22
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 36 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 36 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 35 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 35 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 34 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 34 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 33 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 33 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 32 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 32 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 31 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 31 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 30 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 30 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 29 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 29 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 28 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 28 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 27 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 27 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 26 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 26 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 3 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 3 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  [1m[36mMessage Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mCACHE Message Load (0.0ms)[0m  [1m[34mSELECT "messages".* FROM "messages" WHERE "messages"."chat_id" = 2 ORDER BY "messages"."created_at" DESC LIMIT 1[0m
  â†³ app/models/chat.rb:9:in `last_message'
  [1m[36mMessage Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "messages" WHERE "messages"."chat_id" = 2 /*action='index',application='LittlebirdBot',controller='chats'*/[0m
  â†³ app/views/chats/index.html.erb:37
  Rendered chats/index.html.erb within layouts/application (Duration: 27.1ms | GC: 3.7ms)
  Rendered layout layouts/application.html.erb (Duration: 27.4ms | GC: 3.7ms)
Completed 200 OK in 55ms (Views: 26.7ms | ActiveRecord: 1.0ms (54 queries, 26 cached) | GC: 3.7ms)


